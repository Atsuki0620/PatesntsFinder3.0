{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:06.939953", "seconds": 6.939953}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 76, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 16048, "name": "MainProcess"}, "thread": {"id": 11960, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:08:26.582022+09:00", "timestamp": 1752916106.582022}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:06.950587", "seconds": 6.950587}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 16048, "name": "MainProcess"}, "thread": {"id": 11960, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:08:26.592656+09:00", "timestamp": 1752916106.592656}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:33.142472", "seconds": 33.142472}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 94, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 16048, "name": "MainProcess"}, "thread": {"id": 11960, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:08:52.784541+09:00", "timestamp": 1752916132.784541}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 133, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x0000019DB3920720>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 95, in main\n    ragas_result = evaluate_with_ragas(evaluation_results_for_ragas)\n                   │                   └ [{'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'answer': '1. 各特許の核心技術の要約:\\n   - CN-116194262-A: ヘアスタイルの長さを段階的に調整するためのユニバーサルデバイ...\n                   └ <function evaluate_with_ragas at 0x0000019DB38CB740>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py\", line 29, in evaluate_with_ragas\n    result = evaluate(ds, metrics)\n             │        │   └ [Faithfulness(_required_columns={<MetricType.SINGLE_TURN: 'single_turn'>: {'retrieved_contexts', 'response', 'user_input'}}, ...\n             │        └ Dataset({\n             │              features: ['question', 'answer', 'contexts', 'ground_truths'],\n             │              num_rows: 1\n             │          })\n             └ <function evaluate at 0x0000019DB45151C0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\ragas\\_analytics.py\", line 227, in wrapper\n    result = func(*args, **kwargs)\n             │     │       └ {}\n             │     └ (Dataset({\n             │           features: ['question', 'answer', 'contexts', 'ground_truths'],\n             │           num_rows: 1\n             │       }), [Faithfulness(_required_col...\n             └ <function evaluate at 0x0000019DB3920AE0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\ragas\\evaluation.py\", line 176, in evaluate\n    validate_required_columns(dataset, metrics)\n    │                         │        └ [Faithfulness(_required_columns={<MetricType.SINGLE_TURN: 'single_turn'>: {'retrieved_contexts', 'response', 'user_input'}}, ...\n    │                         └ EvaluationDataset(features=['user_input', 'retrieved_contexts', 'response'], len=1)\n    └ <function validate_required_columns at 0x0000019DB46DB2E0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\ragas\\validation.py\", line 63, in validate_required_columns\n    raise ValueError(\n\nValueError: The metric [context_recall] that is used requires the following additional columns ['reference'] to be present in the dataset.\n", "record": {"elapsed": {"repr": "0:00:33.759724", "seconds": 33.759724}, "exception": {"type": "ValueError", "value": "The metric [context_recall] that is used requires the following additional columns ['reference'] to be present in the dataset.", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 115, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 16048, "name": "MainProcess"}, "thread": {"id": 11960, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:08:53.401793+09:00", "timestamp": 1752916133.401793}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:08.413455", "seconds": 8.413455}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 76, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 1228, "name": "MainProcess"}, "thread": {"id": 12472, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:09:27.735572+09:00", "timestamp": 1752916167.735572}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:08.413992", "seconds": 8.413992}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 1228, "name": "MainProcess"}, "thread": {"id": 12472, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:09:27.736109+09:00", "timestamp": 1752916167.736109}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:34.802095", "seconds": 34.802095}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 94, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 1228, "name": "MainProcess"}, "thread": {"id": 12472, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:09:54.124212+09:00", "timestamp": 1752916194.124212}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:00:35.314696", "seconds": 35.314696}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 96, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 1228, "name": "MainProcess"}, "thread": {"id": 12472, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:09:54.636813+09:00", "timestamp": 1752916194.636813}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 133, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000001B0F6EEC7C0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 99, in main\n    \"summary_metrics\": ragas_result.metrics,\n                       └ {'error': \"The metric [context_recall] that is used requires the following additional columns ['reference'] to be present in ...\n\nAttributeError: 'dict' object has no attribute 'metrics'\n", "record": {"elapsed": {"repr": "0:00:35.314863", "seconds": 35.314863}, "exception": {"type": "AttributeError", "value": "'dict' object has no attribute 'metrics'", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 115, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 1228, "name": "MainProcess"}, "thread": {"id": 12472, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:09:54.636980+09:00", "timestamp": 1752916194.63698}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:07.191378", "seconds": 7.191378}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 76, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 9548, "name": "MainProcess"}, "thread": {"id": 2760, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:10:26.604898+09:00", "timestamp": 1752916226.604898}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:07.191941", "seconds": 7.191941}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 9548, "name": "MainProcess"}, "thread": {"id": 2760, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:10:26.605461+09:00", "timestamp": 1752916226.605461}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:35.331398", "seconds": 35.331398}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 94, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 9548, "name": "MainProcess"}, "thread": {"id": 2760, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:10:54.744918+09:00", "timestamp": 1752916254.744918}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:00:35.882803", "seconds": 35.882803}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 96, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 9548, "name": "MainProcess"}, "thread": {"id": 2760, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:10:55.296323+09:00", "timestamp": 1752916255.296323}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 133, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x0000021C7FE90720>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 99, in main\n    \"summary_metrics\": ragas_result.metrics,\n                       └ {'error': '1 validation error for SingleTurnSample\\nreference\\n  Input should be a valid string [type=string_type, input_valu...\n\nAttributeError: 'dict' object has no attribute 'metrics'\n", "record": {"elapsed": {"repr": "0:00:35.882975", "seconds": 35.882975}, "exception": {"type": "AttributeError", "value": "'dict' object has no attribute 'metrics'", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 115, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 9548, "name": "MainProcess"}, "thread": {"id": 2760, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:10:55.296495+09:00", "timestamp": 1752916255.296495}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:11.384875", "seconds": 11.384875}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 16496, "name": "MainProcess"}, "thread": {"id": 13636, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:14:29.647648+09:00", "timestamp": 1752916469.647648}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:11.385525", "seconds": 11.385525}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 16496, "name": "MainProcess"}, "thread": {"id": 13636, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:14:29.648298+09:00", "timestamp": 1752916469.648298}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:39.594557", "seconds": 39.594557}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 16496, "name": "MainProcess"}, "thread": {"id": 13636, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:14:57.857330+09:00", "timestamp": 1752916497.85733}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:00:40.203300", "seconds": 40.2033}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 101, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 16496, "name": "MainProcess"}, "thread": {"id": 13636, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:14:58.466073+09:00", "timestamp": 1752916498.466073}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 138, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000002729DF54720>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 104, in main\n    \"summary_metrics\": ragas_result.metrics,\n                       └ {'error': \"1 validation error for SingleTurnSample\\nreference\\n  Input should be a valid string [type=string_type, input_valu...\n\nAttributeError: 'dict' object has no attribute 'metrics'\n", "record": {"elapsed": {"repr": "0:00:40.203537", "seconds": 40.203537}, "exception": {"type": "AttributeError", "value": "'dict' object has no attribute 'metrics'", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 120, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 16496, "name": "MainProcess"}, "thread": {"id": 13636, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:14:58.466310+09:00", "timestamp": 1752916498.46631}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:07.924039", "seconds": 7.924039}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 12004, "name": "MainProcess"}, "thread": {"id": 21524, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:15:31.986956+09:00", "timestamp": 1752916531.986956}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:07.924833", "seconds": 7.924833}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 12004, "name": "MainProcess"}, "thread": {"id": 21524, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:15:31.987750+09:00", "timestamp": 1752916531.98775}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:34.046331", "seconds": 34.046331}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 12004, "name": "MainProcess"}, "thread": {"id": 21524, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:15:58.109248+09:00", "timestamp": 1752916558.109248}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:00:34.502682", "seconds": 34.502682}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 101, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 12004, "name": "MainProcess"}, "thread": {"id": 21524, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:15:58.565599+09:00", "timestamp": 1752916558.565599}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 138, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000001E1E2F80720>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 104, in main\n    \"summary_metrics\": ragas_result.metrics,\n                       └ {'error': \"The metric [context_recall] that is used requires the following additional columns ['reference'] to be present in ...\n\nAttributeError: 'dict' object has no attribute 'metrics'\n", "record": {"elapsed": {"repr": "0:00:34.502849", "seconds": 34.502849}, "exception": {"type": "AttributeError", "value": "'dict' object has no attribute 'metrics'", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 120, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 12004, "name": "MainProcess"}, "thread": {"id": 21524, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:15:58.565766+09:00", "timestamp": 1752916558.565766}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:07.089347", "seconds": 7.089347}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 17716, "name": "MainProcess"}, "thread": {"id": 14680, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:16:30.236034+09:00", "timestamp": 1752916590.236034}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:07.089820", "seconds": 7.08982}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 17716, "name": "MainProcess"}, "thread": {"id": 14680, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:16:30.236507+09:00", "timestamp": 1752916590.236507}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:35.433359", "seconds": 35.433359}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 17716, "name": "MainProcess"}, "thread": {"id": 14680, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:16:58.580046+09:00", "timestamp": 1752916618.580046}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:00:35.949530", "seconds": 35.94953}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 101, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 17716, "name": "MainProcess"}, "thread": {"id": 14680, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:16:59.096217+09:00", "timestamp": 1752916619.096217}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 138, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x0000018893654720>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 104, in main\n    \"summary_metrics\": ragas_result.metrics,\n                       └ {'error': \"The metric [context_precision] that is used requires the following additional columns ['reference'] to be present ...\n\nAttributeError: 'dict' object has no attribute 'metrics'\n", "record": {"elapsed": {"repr": "0:00:35.949749", "seconds": 35.949749}, "exception": {"type": "AttributeError", "value": "'dict' object has no attribute 'metrics'", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 120, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 17716, "name": "MainProcess"}, "thread": {"id": 14680, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:16:59.096436+09:00", "timestamp": 1752916619.096436}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:08.995780", "seconds": 8.99578}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 26172, "name": "MainProcess"}, "thread": {"id": 12928, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:17:31.653583+09:00", "timestamp": 1752916651.653583}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:08.996455", "seconds": 8.996455}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 26172, "name": "MainProcess"}, "thread": {"id": 12928, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:17:31.654258+09:00", "timestamp": 1752916651.654258}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:37.557954", "seconds": 37.557954}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 26172, "name": "MainProcess"}, "thread": {"id": 12928, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:18:00.215757+09:00", "timestamp": 1752916680.215757}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:01:30.216032", "seconds": 90.216032}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 101, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 26172, "name": "MainProcess"}, "thread": {"id": 12928, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:18:52.873835+09:00", "timestamp": 1752916732.873835}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 138, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x0000017962D80720>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 104, in main\n    \"summary_metrics\": ragas_result.metrics,\n                       └ {'faithfulness': 0.9697, 'answer_relevancy': 0.7854}\n\nAttributeError: 'EvaluationResult' object has no attribute 'metrics'\n", "record": {"elapsed": {"repr": "0:01:30.216320", "seconds": 90.21632}, "exception": {"type": "AttributeError", "value": "'EvaluationResult' object has no attribute 'metrics'", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 120, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 26172, "name": "MainProcess"}, "thread": {"id": 12928, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:18:52.874123+09:00", "timestamp": 1752916732.874123}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:09.653712", "seconds": 9.653712}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 17744, "name": "MainProcess"}, "thread": {"id": 16856, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:19:57.607630+09:00", "timestamp": 1752916797.60763}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:09.654182", "seconds": 9.654182}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 17744, "name": "MainProcess"}, "thread": {"id": 16856, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:19:57.608100+09:00", "timestamp": 1752916797.6081}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:35.407335", "seconds": 35.407335}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 17744, "name": "MainProcess"}, "thread": {"id": 16856, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:20:23.361253+09:00", "timestamp": 1752916823.361253}}}
{"text": "RAGAs evaluation failed: 1 validation error for SingleTurnSample\nreference\n  Input should be a valid string [type=string_type, input_value=[], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/string_type\n", "record": {"elapsed": {"repr": "0:00:35.799832", "seconds": 35.799832}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 103, "message": "RAGAs evaluation failed: 1 validation error for SingleTurnSample\nreference\n  Input should be a valid string [type=string_type, input_value=[], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/string_type", "module": "run_evaluation", "name": "__main__", "process": {"id": 17744, "name": "MainProcess"}, "thread": {"id": 16856, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:20:23.753750+09:00", "timestamp": 1752916823.75375}}}
{"text": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json\n", "record": {"elapsed": {"repr": "0:00:35.801186", "seconds": 35.801186}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 119, "message": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json", "module": "run_evaluation", "name": "__main__", "process": {"id": 17744, "name": "MainProcess"}, "thread": {"id": 16856, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:20:23.755104+09:00", "timestamp": 1752916823.755104}}}
{"text": "{\n  \"error\": \"1 validation error for SingleTurnSample\\nreference\\n  Input should be a valid string [type=string_type, input_value=[], input_type=list]\\n    For further information visit https://errors.pydantic.dev/2.11/v/string_type\"\n}\n", "record": {"elapsed": {"repr": "0:00:35.801510", "seconds": 35.80151}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 120, "message": "{\n  \"error\": \"1 validation error for SingleTurnSample\\nreference\\n  Input should be a valid string [type=string_type, input_value=[], input_type=list]\\n    For further information visit https://errors.pydantic.dev/2.11/v/string_type\"\n}", "module": "run_evaluation", "name": "__main__", "process": {"id": 17744, "name": "MainProcess"}, "thread": {"id": 16856, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:20:23.755428+09:00", "timestamp": 1752916823.755428}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:07.746660", "seconds": 7.74666}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 16664, "name": "MainProcess"}, "thread": {"id": 22112, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:20:55.856433+09:00", "timestamp": 1752916855.856433}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:07.747309", "seconds": 7.747309}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 16664, "name": "MainProcess"}, "thread": {"id": 22112, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:20:55.857082+09:00", "timestamp": 1752916855.857082}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:32.371292", "seconds": 32.371292}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 16664, "name": "MainProcess"}, "thread": {"id": 22112, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:21:20.481065+09:00", "timestamp": 1752916880.481065}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 140, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x0000026559B40720>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 102, in main\n    if \"error\" in ragas_result:\n                  └ {'faithfulness': 1.0000, 'answer_relevancy': 0.7883}\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\ragas\\dataset_schema.py\", line 446, in __getitem__\n    return self._scores_dict[key]\n           │    │            └ 0\n           │    └ {'faithfulness': [1.0], 'answer_relevancy': [np.float64(0.7883402547487038)]}\n           └ {'faithfulness': 1.0000, 'answer_relevancy': 0.7883}\n\nKeyError: 0\n", "record": {"elapsed": {"repr": "0:01:19.032346", "seconds": 79.032346}, "exception": {"type": "KeyError", "value": "0", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 122, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 16664, "name": "MainProcess"}, "thread": {"id": 22112, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:22:07.142119+09:00", "timestamp": 1752916927.142119}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:06.951390", "seconds": 6.95139}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 21788, "name": "MainProcess"}, "thread": {"id": 11872, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:22:56.637059+09:00", "timestamp": 1752916976.637059}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:06.951825", "seconds": 6.951825}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 21788, "name": "MainProcess"}, "thread": {"id": 11872, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:22:56.637494+09:00", "timestamp": 1752916976.637494}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:31.102552", "seconds": 31.102552}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 21788, "name": "MainProcess"}, "thread": {"id": 11872, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:23:20.788221+09:00", "timestamp": 1752917000.788221}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:01:18.338537", "seconds": 78.338537}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 21788, "name": "MainProcess"}, "thread": {"id": 11872, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:24:08.024206+09:00", "timestamp": 1752917048.024206}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 140, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000001C920250720>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 111, in main\n    \"summary_metrics\": ragas_result.metrics,\n                       └ {'faithfulness': 1.0000, 'answer_relevancy': 0.7883}\n\nAttributeError: 'EvaluationResult' object has no attribute 'metrics'\n", "record": {"elapsed": {"repr": "0:01:18.338847", "seconds": 78.338847}, "exception": {"type": "AttributeError", "value": "'EvaluationResult' object has no attribute 'metrics'", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 122, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 21788, "name": "MainProcess"}, "thread": {"id": 11872, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:24:08.024516+09:00", "timestamp": 1752917048.024516}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:07.848257", "seconds": 7.848257}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 21808, "name": "MainProcess"}, "thread": {"id": 10000, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:24:52.036617+09:00", "timestamp": 1752917092.036617}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:07.848797", "seconds": 7.848797}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 21808, "name": "MainProcess"}, "thread": {"id": 10000, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:24:52.037157+09:00", "timestamp": 1752917092.037157}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:33.983829", "seconds": 33.983829}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 21808, "name": "MainProcess"}, "thread": {"id": 10000, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:25:18.172189+09:00", "timestamp": 1752917118.172189}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:06.855483", "seconds": 6.855483}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 10180, "name": "MainProcess"}, "thread": {"id": 23700, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:26:24.708413+09:00", "timestamp": 1752917184.708413}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:06.855923", "seconds": 6.855923}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 10180, "name": "MainProcess"}, "thread": {"id": 23700, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:26:24.708853+09:00", "timestamp": 1752917184.708853}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:35.606178", "seconds": 35.606178}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 10180, "name": "MainProcess"}, "thread": {"id": 23700, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:26:53.459108+09:00", "timestamp": 1752917213.459108}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:01:28.113030", "seconds": 88.11303}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 10180, "name": "MainProcess"}, "thread": {"id": 23700, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:27:45.965960+09:00", "timestamp": 1752917265.96596}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 140, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x0000024487650720>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 111, in main\n    \"summary_metrics\": ragas_result.score_row,\n                       └ {'faithfulness': 0.8966, 'answer_relevancy': 0.7884}\n\nAttributeError: 'EvaluationResult' object has no attribute 'score_row'\n", "record": {"elapsed": {"repr": "0:01:28.113246", "seconds": 88.113246}, "exception": {"type": "AttributeError", "value": "'EvaluationResult' object has no attribute 'score_row'", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 122, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 10180, "name": "MainProcess"}, "thread": {"id": 23700, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:27:45.966176+09:00", "timestamp": 1752917265.966176}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:06.914257", "seconds": 6.914257}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 21416, "name": "MainProcess"}, "thread": {"id": 25412, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:28:32.436006+09:00", "timestamp": 1752917312.436006}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:06.914670", "seconds": 6.91467}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 21416, "name": "MainProcess"}, "thread": {"id": 25412, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:28:32.436419+09:00", "timestamp": 1752917312.436419}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:42.355551", "seconds": 42.355551}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 21416, "name": "MainProcess"}, "thread": {"id": 25412, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:29:07.877300+09:00", "timestamp": 1752917347.8773}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:01:35.327796", "seconds": 95.327796}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 21416, "name": "MainProcess"}, "thread": {"id": 25412, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:30:00.849545+09:00", "timestamp": 1752917400.849545}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 140, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x0000027EC3270720>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 111, in main\n    \"summary_metrics\": ragas_result.metrics,\n                       └ {'faithfulness': 1.0000, 'answer_relevancy': 0.7874}\n\nAttributeError: 'EvaluationResult' object has no attribute 'metrics'\n", "record": {"elapsed": {"repr": "0:01:35.328039", "seconds": 95.328039}, "exception": {"type": "AttributeError", "value": "'EvaluationResult' object has no attribute 'metrics'", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 122, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 21416, "name": "MainProcess"}, "thread": {"id": 25412, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:30:00.849788+09:00", "timestamp": 1752917400.849788}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:06.927118", "seconds": 6.927118}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 24348, "name": "MainProcess"}, "thread": {"id": 14220, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:31:15.932512+09:00", "timestamp": 1752917475.932512}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:06.927552", "seconds": 6.927552}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 24348, "name": "MainProcess"}, "thread": {"id": 14220, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:31:15.932946+09:00", "timestamp": 1752917475.932946}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:32.897997", "seconds": 32.897997}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 24348, "name": "MainProcess"}, "thread": {"id": 14220, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:31:41.903391+09:00", "timestamp": 1752917501.903391}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:01:19.285592", "seconds": 79.285592}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 24348, "name": "MainProcess"}, "thread": {"id": 14220, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:32:28.290986+09:00", "timestamp": 1752917548.290986}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 140, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000001C37B20B9C0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 111, in main\n    \"summary_metrics\": ragas_result.metrics,\n                       └ {'faithfulness': 0.7586, 'answer_relevancy': 0.7882}\n\nAttributeError: 'EvaluationResult' object has no attribute 'metrics'\n", "record": {"elapsed": {"repr": "0:01:19.285828", "seconds": 79.285828}, "exception": {"type": "AttributeError", "value": "'EvaluationResult' object has no attribute 'metrics'", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 122, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 24348, "name": "MainProcess"}, "thread": {"id": 14220, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:32:28.291222+09:00", "timestamp": 1752917548.291222}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:07.029464", "seconds": 7.029464}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 11008, "name": "MainProcess"}, "thread": {"id": 416, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:33:37.246086+09:00", "timestamp": 1752917617.246086}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:07.029911", "seconds": 7.029911}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 11008, "name": "MainProcess"}, "thread": {"id": 416, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:33:37.246533+09:00", "timestamp": 1752917617.246533}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:34.000751", "seconds": 34.000751}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 11008, "name": "MainProcess"}, "thread": {"id": 416, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:34:04.217373+09:00", "timestamp": 1752917644.217373}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:01:21.566115", "seconds": 81.566115}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 11008, "name": "MainProcess"}, "thread": {"id": 416, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:34:51.782737+09:00", "timestamp": 1752917691.782737}}}
{"text": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>\n", "record": {"elapsed": {"repr": "0:01:21.566381", "seconds": 81.566381}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 110, "message": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>", "module": "run_evaluation", "name": "__main__", "process": {"id": 11008, "name": "MainProcess"}, "thread": {"id": 416, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:34:51.783003+09:00", "timestamp": 1752917691.783003}}}
{"text": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']\n", "record": {"elapsed": {"repr": "0:01:21.566514", "seconds": 81.566514}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 111, "message": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']", "module": "run_evaluation", "name": "__main__", "process": {"id": 11008, "name": "MainProcess"}, "thread": {"id": 416, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:34:51.783136+09:00", "timestamp": 1752917691.783136}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 142, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000001D1F1A3C7C0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 113, in main\n    \"summary_metrics\": ragas_result.metrics,\n                       └ {'faithfulness': 0.8750, 'answer_relevancy': 0.7946}\n\nAttributeError: 'EvaluationResult' object has no attribute 'metrics'\n", "record": {"elapsed": {"repr": "0:01:21.566620", "seconds": 81.56662}, "exception": {"type": "AttributeError", "value": "'EvaluationResult' object has no attribute 'metrics'", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 124, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 11008, "name": "MainProcess"}, "thread": {"id": 416, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:34:51.783242+09:00", "timestamp": 1752917691.783242}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:07.003111", "seconds": 7.003111}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 25356, "name": "MainProcess"}, "thread": {"id": 13116, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:36:13.469717+09:00", "timestamp": 1752917773.469717}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:07.003523", "seconds": 7.003523}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 25356, "name": "MainProcess"}, "thread": {"id": 13116, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:36:13.470129+09:00", "timestamp": 1752917773.470129}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:33.388791", "seconds": 33.388791}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 25356, "name": "MainProcess"}, "thread": {"id": 13116, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:36:39.855397+09:00", "timestamp": 1752917799.855397}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:01:18.725252", "seconds": 78.725252}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 25356, "name": "MainProcess"}, "thread": {"id": 13116, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:37:25.191858+09:00", "timestamp": 1752917845.191858}}}
{"text": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>\n", "record": {"elapsed": {"repr": "0:01:18.725455", "seconds": 78.725455}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 110, "message": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>", "module": "run_evaluation", "name": "__main__", "process": {"id": 25356, "name": "MainProcess"}, "thread": {"id": 13116, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:37:25.192061+09:00", "timestamp": 1752917845.192061}}}
{"text": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']\n", "record": {"elapsed": {"repr": "0:01:18.725715", "seconds": 78.725715}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 111, "message": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']", "module": "run_evaluation", "name": "__main__", "process": {"id": 25356, "name": "MainProcess"}, "thread": {"id": 13116, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:37:25.192321+09:00", "timestamp": 1752917845.192321}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 142, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x00000188FBB1C7C0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 113, in main\n    \"summary_metrics\": ragas_result.scores.mean().to_dict(),\n                       │            └ [{'faithfulness': 1.0, 'answer_relevancy': np.float64(0.7855277401957762)}]\n                       └ {'faithfulness': 1.0000, 'answer_relevancy': 0.7855}\n\nAttributeError: 'list' object has no attribute 'mean'\n", "record": {"elapsed": {"repr": "0:01:18.725820", "seconds": 78.72582}, "exception": {"type": "AttributeError", "value": "'list' object has no attribute 'mean'", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 124, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 25356, "name": "MainProcess"}, "thread": {"id": 13116, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:37:25.192426+09:00", "timestamp": 1752917845.192426}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:07.023756", "seconds": 7.023756}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 18984, "name": "MainProcess"}, "thread": {"id": 8432, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:38:15.210544+09:00", "timestamp": 1752917895.210544}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:07.024293", "seconds": 7.024293}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 18984, "name": "MainProcess"}, "thread": {"id": 8432, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:38:15.211081+09:00", "timestamp": 1752917895.211081}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:38.693715", "seconds": 38.693715}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 18984, "name": "MainProcess"}, "thread": {"id": 8432, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:38:46.880503+09:00", "timestamp": 1752917926.880503}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:01:30.194135", "seconds": 90.194135}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 18984, "name": "MainProcess"}, "thread": {"id": 8432, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:39:38.380923+09:00", "timestamp": 1752917978.380923}}}
{"text": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>\n", "record": {"elapsed": {"repr": "0:01:30.194342", "seconds": 90.194342}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 110, "message": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>", "module": "run_evaluation", "name": "__main__", "process": {"id": 18984, "name": "MainProcess"}, "thread": {"id": 8432, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:39:38.381130+09:00", "timestamp": 1752917978.38113}}}
{"text": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']\n", "record": {"elapsed": {"repr": "0:01:30.194493", "seconds": 90.194493}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 111, "message": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']", "module": "run_evaluation", "name": "__main__", "process": {"id": 18984, "name": "MainProcess"}, "thread": {"id": 8432, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:39:38.381281+09:00", "timestamp": 1752917978.381281}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 142, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000002C8613907C0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 113, in main\n    \"summary_metrics\": ragas_result.scores.mean().to_dict(),\n                       │            └ [{'faithfulness': 0.9032258064516129, 'answer_relevancy': np.float64(0.7890080695324272)}]\n                       └ {'faithfulness': 0.9032, 'answer_relevancy': 0.7890}\n\nAttributeError: 'list' object has no attribute 'mean'\n", "record": {"elapsed": {"repr": "0:01:30.194667", "seconds": 90.194667}, "exception": {"type": "AttributeError", "value": "'list' object has no attribute 'mean'", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 124, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 18984, "name": "MainProcess"}, "thread": {"id": 8432, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:39:38.381455+09:00", "timestamp": 1752917978.381455}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:10.192370", "seconds": 10.19237}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 3652, "name": "MainProcess"}, "thread": {"id": 6092, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:40:30.243649+09:00", "timestamp": 1752918030.243649}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:10.193134", "seconds": 10.193134}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 3652, "name": "MainProcess"}, "thread": {"id": 6092, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:40:30.244413+09:00", "timestamp": 1752918030.244413}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:39.301260", "seconds": 39.30126}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 3652, "name": "MainProcess"}, "thread": {"id": 6092, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:40:59.352539+09:00", "timestamp": 1752918059.352539}}}
{"text": "RAGAs evaluation failed: evaluate_with_ragas returned None.\n", "record": {"elapsed": {"repr": "0:00:39.675821", "seconds": 39.675821}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 103, "message": "RAGAs evaluation failed: evaluate_with_ragas returned None.", "module": "run_evaluation", "name": "__main__", "process": {"id": 3652, "name": "MainProcess"}, "thread": {"id": 6092, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:40:59.727100+09:00", "timestamp": 1752918059.7271}}}
{"text": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json\n", "record": {"elapsed": {"repr": "0:00:39.677149", "seconds": 39.677149}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 121, "message": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json", "module": "run_evaluation", "name": "__main__", "process": {"id": 3652, "name": "MainProcess"}, "thread": {"id": 6092, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:40:59.728428+09:00", "timestamp": 1752918059.728428}}}
{"text": "{\n  \"error\": \"RAGAs evaluation failed.\"\n}\n", "record": {"elapsed": {"repr": "0:00:39.677442", "seconds": 39.677442}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 122, "message": "{\n  \"error\": \"RAGAs evaluation failed.\"\n}", "module": "run_evaluation", "name": "__main__", "process": {"id": 3652, "name": "MainProcess"}, "thread": {"id": 6092, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:40:59.728721+09:00", "timestamp": 1752918059.728721}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:07.983154", "seconds": 7.983154}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 13316, "name": "MainProcess"}, "thread": {"id": 3464, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:41:57.803720+09:00", "timestamp": 1752918117.80372}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:07.983598", "seconds": 7.983598}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 13316, "name": "MainProcess"}, "thread": {"id": 3464, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:41:57.804164+09:00", "timestamp": 1752918117.804164}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:35.640575", "seconds": 35.640575}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 13316, "name": "MainProcess"}, "thread": {"id": 3464, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:42:25.461141+09:00", "timestamp": 1752918145.461141}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:01:22.889518", "seconds": 82.889518}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 13316, "name": "MainProcess"}, "thread": {"id": 3464, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:43:12.710084+09:00", "timestamp": 1752918192.710084}}}
{"text": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>\n", "record": {"elapsed": {"repr": "0:01:22.889786", "seconds": 82.889786}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 110, "message": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>", "module": "run_evaluation", "name": "__main__", "process": {"id": 13316, "name": "MainProcess"}, "thread": {"id": 3464, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:43:12.710352+09:00", "timestamp": 1752918192.710352}}}
{"text": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']\n", "record": {"elapsed": {"repr": "0:01:22.889963", "seconds": 82.889963}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 111, "message": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']", "module": "run_evaluation", "name": "__main__", "process": {"id": 13316, "name": "MainProcess"}, "thread": {"id": 3464, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:43:12.710529+09:00", "timestamp": 1752918192.710529}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 142, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000001B9770E07C0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 113, in main\n    \"summary_metrics\": ragas_result.scores.mean().to_dict(),\n                       │            └ [{'faithfulness': 0.967741935483871, 'answer_relevancy': np.float64(0.7883402547487038)}]\n                       └ {'faithfulness': 0.9677, 'answer_relevancy': 0.7883}\n\nAttributeError: 'list' object has no attribute 'mean'\n", "record": {"elapsed": {"repr": "0:01:22.890222", "seconds": 82.890222}, "exception": {"type": "AttributeError", "value": "'list' object has no attribute 'mean'", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 124, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 13316, "name": "MainProcess"}, "thread": {"id": 3464, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:43:12.710788+09:00", "timestamp": 1752918192.710788}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:09.083259", "seconds": 9.083259}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 17424, "name": "MainProcess"}, "thread": {"id": 21372, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:44:23.512421+09:00", "timestamp": 1752918263.512421}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:09.083932", "seconds": 9.083932}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 17424, "name": "MainProcess"}, "thread": {"id": 21372, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:44:23.513094+09:00", "timestamp": 1752918263.513094}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:33.685552", "seconds": 33.685552}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 17424, "name": "MainProcess"}, "thread": {"id": 21372, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:44:48.114714+09:00", "timestamp": 1752918288.114714}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:01:25.523202", "seconds": 85.523202}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 17424, "name": "MainProcess"}, "thread": {"id": 21372, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:45:39.952364+09:00", "timestamp": 1752918339.952364}}}
{"text": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>\n", "record": {"elapsed": {"repr": "0:01:25.523397", "seconds": 85.523397}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 110, "message": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>", "module": "run_evaluation", "name": "__main__", "process": {"id": 17424, "name": "MainProcess"}, "thread": {"id": 21372, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:45:39.952559+09:00", "timestamp": 1752918339.952559}}}
{"text": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']\n", "record": {"elapsed": {"repr": "0:01:25.523545", "seconds": 85.523545}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 111, "message": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']", "module": "run_evaluation", "name": "__main__", "process": {"id": 17424, "name": "MainProcess"}, "thread": {"id": 21372, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:45:39.952707+09:00", "timestamp": 1752918339.952707}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 142, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000001C358AF0860>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 113, in main\n    \"summary_metrics\": pd.DataFrame([s.score for s in ragas_result.scores]).mean().to_dict(),\n                       │  │                           │            └ [{'faithfulness': 0.9032258064516129, 'answer_relevancy': np.float64(0.793570561852312)}]\n                       │  │                           └ {'faithfulness': 0.9032, 'answer_relevancy': 0.7936}\n                       │  └ <class 'pandas.core.frame.DataFrame'>\n                       └ <module 'pandas' from 'C:\\\\Users\\\\atsuk\\\\OneDrive\\\\ドキュメント\\\\GeminiCLI\\\\2507 PatentsFinder3.0\\\\env-PatentsFinder3.0\\\\Lib\\\\site-...\n\nAttributeError: 'dict' object has no attribute 'score'\n", "record": {"elapsed": {"repr": "0:01:25.523738", "seconds": 85.523738}, "exception": {"type": "AttributeError", "value": "'dict' object has no attribute 'score'", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 124, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 17424, "name": "MainProcess"}, "thread": {"id": 21372, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:45:39.952900+09:00", "timestamp": 1752918339.9529}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:07.138711", "seconds": 7.138711}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 9516, "name": "MainProcess"}, "thread": {"id": 412, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:46:54.391825+09:00", "timestamp": 1752918414.391825}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:07.139260", "seconds": 7.13926}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 9516, "name": "MainProcess"}, "thread": {"id": 412, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:46:54.392374+09:00", "timestamp": 1752918414.392374}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:32.986206", "seconds": 32.986206}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 9516, "name": "MainProcess"}, "thread": {"id": 412, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:47:20.239320+09:00", "timestamp": 1752918440.23932}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:01:14.663378", "seconds": 74.663378}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 9516, "name": "MainProcess"}, "thread": {"id": 412, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:48:01.916492+09:00", "timestamp": 1752918481.916492}}}
{"text": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>\n", "record": {"elapsed": {"repr": "0:01:14.663586", "seconds": 74.663586}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 110, "message": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>", "module": "run_evaluation", "name": "__main__", "process": {"id": 9516, "name": "MainProcess"}, "thread": {"id": 412, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:48:01.916700+09:00", "timestamp": 1752918481.9167}}}
{"text": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']\n", "record": {"elapsed": {"repr": "0:01:14.663709", "seconds": 74.663709}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 111, "message": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']", "module": "run_evaluation", "name": "__main__", "process": {"id": 9516, "name": "MainProcess"}, "thread": {"id": 412, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:48:01.916823+09:00", "timestamp": 1752918481.916823}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 142, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x00000228E81C07C0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 114, in main\n    \"detailed_results\": ragas_result.scores.to_dict('records')\n                        │            └ [{'faithfulness': 0.90625, 'answer_relevancy': np.float64(0.8019281252724353)}]\n                        └ {'faithfulness': 0.9062, 'answer_relevancy': 0.8019}\n\nAttributeError: 'list' object has no attribute 'to_dict'\n", "record": {"elapsed": {"repr": "0:01:14.666510", "seconds": 74.66651}, "exception": {"type": "AttributeError", "value": "'list' object has no attribute 'to_dict'", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 124, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 9516, "name": "MainProcess"}, "thread": {"id": 412, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:48:01.919624+09:00", "timestamp": 1752918481.919624}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:07.188151", "seconds": 7.188151}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 23736, "name": "MainProcess"}, "thread": {"id": 25340, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:49:23.832750+09:00", "timestamp": 1752918563.83275}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:07.188686", "seconds": 7.188686}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 23736, "name": "MainProcess"}, "thread": {"id": 25340, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:49:23.833285+09:00", "timestamp": 1752918563.833285}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:34.581167", "seconds": 34.581167}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 23736, "name": "MainProcess"}, "thread": {"id": 25340, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:49:51.225766+09:00", "timestamp": 1752918591.225766}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:01:40.434993", "seconds": 100.434993}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 23736, "name": "MainProcess"}, "thread": {"id": 25340, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:50:57.079592+09:00", "timestamp": 1752918657.079592}}}
{"text": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>\n", "record": {"elapsed": {"repr": "0:01:40.435308", "seconds": 100.435308}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 110, "message": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>", "module": "run_evaluation", "name": "__main__", "process": {"id": 23736, "name": "MainProcess"}, "thread": {"id": 25340, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:50:57.079907+09:00", "timestamp": 1752918657.079907}}}
{"text": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']\n", "record": {"elapsed": {"repr": "0:01:40.435460", "seconds": 100.43546}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 111, "message": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']", "module": "run_evaluation", "name": "__main__", "process": {"id": 23736, "name": "MainProcess"}, "thread": {"id": 25340, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:50:57.080059+09:00", "timestamp": 1752918657.080059}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 142, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000001C1DA6E0860>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 114, in main\n    \"detailed_results\": [s.to_dict() for s in ragas_result.scores]\n                                              │            └ [{'faithfulness': 0.8235294117647058, 'answer_relevancy': np.float64(0.7883437733065167)}]\n                                              └ {'faithfulness': 0.8235, 'answer_relevancy': 0.7883}\n\nAttributeError: 'dict' object has no attribute 'to_dict'\n", "record": {"elapsed": {"repr": "0:01:40.436351", "seconds": 100.436351}, "exception": {"type": "AttributeError", "value": "'dict' object has no attribute 'to_dict'", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 124, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 23736, "name": "MainProcess"}, "thread": {"id": 25340, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:50:57.080950+09:00", "timestamp": 1752918657.08095}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:07.092314", "seconds": 7.092314}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 13092, "name": "MainProcess"}, "thread": {"id": 2748, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:52:54.979997+09:00", "timestamp": 1752918774.979997}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:07.092768", "seconds": 7.092768}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 13092, "name": "MainProcess"}, "thread": {"id": 2748, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:52:54.980451+09:00", "timestamp": 1752918774.980451}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:34.324269", "seconds": 34.324269}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 13092, "name": "MainProcess"}, "thread": {"id": 2748, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:53:22.211952+09:00", "timestamp": 1752918802.211952}}}
{"text": "Starting RAGAs evaluation within metrics.py...\n", "record": {"elapsed": {"repr": "0:00:34.329579", "seconds": 34.329579}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 30, "message": "Starting RAGAs evaluation within metrics.py...", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 13092, "name": "MainProcess"}, "thread": {"id": 2748, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:53:22.217262+09:00", "timestamp": 1752918802.217262}}}
{"text": "RAGAs evaluation completed successfully within metrics.py.\n", "record": {"elapsed": {"repr": "0:01:29.926790", "seconds": 89.92679}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 34, "message": "RAGAs evaluation completed successfully within metrics.py.", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 13092, "name": "MainProcess"}, "thread": {"id": 2748, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:54:17.814473+09:00", "timestamp": 1752918857.814473}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:01:29.927048", "seconds": 89.927048}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 13092, "name": "MainProcess"}, "thread": {"id": 2748, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:54:17.814731+09:00", "timestamp": 1752918857.814731}}}
{"text": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>\n", "record": {"elapsed": {"repr": "0:01:29.927161", "seconds": 89.927161}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 110, "message": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>", "module": "run_evaluation", "name": "__main__", "process": {"id": 13092, "name": "MainProcess"}, "thread": {"id": 2748, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:54:17.814844+09:00", "timestamp": 1752918857.814844}}}
{"text": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']\n", "record": {"elapsed": {"repr": "0:01:29.927285", "seconds": 89.927285}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 111, "message": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']", "module": "run_evaluation", "name": "__main__", "process": {"id": 13092, "name": "MainProcess"}, "thread": {"id": 2748, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:54:17.814968+09:00", "timestamp": 1752918857.814968}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 142, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000001FDED94B9C0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 114, in main\n    \"detailed_results\": [s.to_dict() for s in ragas_result.scores]\n                                              │            └ [{'faithfulness': 0.9629629629629629, 'answer_relevancy': np.float64(0.7883402547487038)}]\n                                              └ {'faithfulness': 0.9630, 'answer_relevancy': 0.7883}\n\nAttributeError: 'dict' object has no attribute 'to_dict'\n", "record": {"elapsed": {"repr": "0:01:29.928120", "seconds": 89.92812}, "exception": {"type": "AttributeError", "value": "'dict' object has no attribute 'to_dict'", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 124, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 13092, "name": "MainProcess"}, "thread": {"id": 2748, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:54:17.815803+09:00", "timestamp": 1752918857.815803}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:07.055159", "seconds": 7.055159}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 23360, "name": "MainProcess"}, "thread": {"id": 23032, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:55:48.363668+09:00", "timestamp": 1752918948.363668}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:07.055596", "seconds": 7.055596}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 23360, "name": "MainProcess"}, "thread": {"id": 23032, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:55:48.364105+09:00", "timestamp": 1752918948.364105}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:00:38.659871", "seconds": 38.659871}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 23360, "name": "MainProcess"}, "thread": {"id": 23032, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:56:19.968380+09:00", "timestamp": 1752918979.96838}}}
{"text": "Starting RAGAs evaluation within metrics.py...\n", "record": {"elapsed": {"repr": "0:00:38.664938", "seconds": 38.664938}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 30, "message": "Starting RAGAs evaluation within metrics.py...", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 23360, "name": "MainProcess"}, "thread": {"id": 23032, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:56:19.973447+09:00", "timestamp": 1752918979.973447}}}
{"text": "RAGAs evaluation completed successfully within metrics.py.\n", "record": {"elapsed": {"repr": "0:01:43.722767", "seconds": 103.722767}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 34, "message": "RAGAs evaluation completed successfully within metrics.py.", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 23360, "name": "MainProcess"}, "thread": {"id": 23032, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:57:25.031276+09:00", "timestamp": 1752919045.031276}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:01:43.723004", "seconds": 103.723004}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 23360, "name": "MainProcess"}, "thread": {"id": 23032, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:57:25.031513+09:00", "timestamp": 1752919045.031513}}}
{"text": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>\n", "record": {"elapsed": {"repr": "0:01:43.723110", "seconds": 103.72311}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 110, "message": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>", "module": "run_evaluation", "name": "__main__", "process": {"id": 23360, "name": "MainProcess"}, "thread": {"id": 23032, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:57:25.031619+09:00", "timestamp": 1752919045.031619}}}
{"text": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']\n", "record": {"elapsed": {"repr": "0:01:43.723227", "seconds": 103.723227}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 111, "message": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']", "module": "run_evaluation", "name": "__main__", "process": {"id": 23360, "name": "MainProcess"}, "thread": {"id": 23032, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:57:25.031736+09:00", "timestamp": 1752919045.031736}}}
{"text": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json\n", "record": {"elapsed": {"repr": "0:01:43.726208", "seconds": 103.726208}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 121, "message": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json", "module": "run_evaluation", "name": "__main__", "process": {"id": 23360, "name": "MainProcess"}, "thread": {"id": 23032, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:57:25.034717+09:00", "timestamp": 1752919045.034717}}}
{"text": "{\n  \"faithfulness\": 0.625,\n  \"answer_relevancy\": 0.787791256279315\n}\n", "record": {"elapsed": {"repr": "0:01:43.726372", "seconds": 103.726372}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 122, "message": "{\n  \"faithfulness\": 0.625,\n  \"answer_relevancy\": 0.787791256279315\n}", "module": "run_evaluation", "name": "__main__", "process": {"id": 23360, "name": "MainProcess"}, "thread": {"id": 23032, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:57:25.034881+09:00", "timestamp": 1752919045.034881}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:06.964093", "seconds": 6.964093}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 12340, "name": "MainProcess"}, "thread": {"id": 5424, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:59:00.273956+09:00", "timestamp": 1752919140.273956}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:06.973967", "seconds": 6.973967}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 12340, "name": "MainProcess"}, "thread": {"id": 5424, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:59:00.283830+09:00", "timestamp": 1752919140.28383}}}
{"text": "Running evaluation for query: water_filtration_membrane_002\n", "record": {"elapsed": {"repr": "0:00:37.535013", "seconds": 37.535013}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 12340, "name": "MainProcess"}, "thread": {"id": 5424, "name": "MainThread"}, "time": {"repr": "2025-07-19 18:59:30.844876+09:00", "timestamp": 1752919170.844876}}}
{"text": "Running evaluation for query: autonomous_driving_sensor_fusion_003\n", "record": {"elapsed": {"repr": "0:01:08.997536", "seconds": 68.997536}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 12340, "name": "MainProcess"}, "thread": {"id": 5424, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:00:02.307399+09:00", "timestamp": 1752919202.307399}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:01:45.391028", "seconds": 105.391028}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 12340, "name": "MainProcess"}, "thread": {"id": 5424, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:00:38.700891+09:00", "timestamp": 1752919238.700891}}}
{"text": "Starting RAGAs evaluation within metrics.py...\n", "record": {"elapsed": {"repr": "0:01:45.396180", "seconds": 105.39618}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 30, "message": "Starting RAGAs evaluation within metrics.py...", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 12340, "name": "MainProcess"}, "thread": {"id": 5424, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:00:38.706043+09:00", "timestamp": 1752919238.706043}}}
{"text": "RAGAs evaluation completed successfully within metrics.py.\n", "record": {"elapsed": {"repr": "0:02:43.796636", "seconds": 163.796636}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 34, "message": "RAGAs evaluation completed successfully within metrics.py.", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 12340, "name": "MainProcess"}, "thread": {"id": 5424, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:01:37.106499+09:00", "timestamp": 1752919297.106499}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:02:43.796835", "seconds": 163.796835}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 12340, "name": "MainProcess"}, "thread": {"id": 5424, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:01:37.106698+09:00", "timestamp": 1752919297.106698}}}
{"text": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>\n", "record": {"elapsed": {"repr": "0:02:43.796930", "seconds": 163.79693}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 110, "message": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>", "module": "run_evaluation", "name": "__main__", "process": {"id": 12340, "name": "MainProcess"}, "thread": {"id": 5424, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:01:37.106793+09:00", "timestamp": 1752919297.106793}}}
{"text": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']\n", "record": {"elapsed": {"repr": "0:02:43.797114", "seconds": 163.797114}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 111, "message": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']", "module": "run_evaluation", "name": "__main__", "process": {"id": 12340, "name": "MainProcess"}, "thread": {"id": 5424, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:01:37.106977+09:00", "timestamp": 1752919297.106977}}}
{"text": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json\n", "record": {"elapsed": {"repr": "0:02:43.799127", "seconds": 163.799127}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 121, "message": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json", "module": "run_evaluation", "name": "__main__", "process": {"id": 12340, "name": "MainProcess"}, "thread": {"id": 5424, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:01:37.108990+09:00", "timestamp": 1752919297.10899}}}
{"text": "{\n  \"faithfulness\": 0.8656987295825771,\n  \"answer_relevancy\": 0.7819259225721313\n}\n", "record": {"elapsed": {"repr": "0:02:43.799301", "seconds": 163.799301}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 122, "message": "{\n  \"faithfulness\": 0.8656987295825771,\n  \"answer_relevancy\": 0.7819259225721313\n}", "module": "run_evaluation", "name": "__main__", "process": {"id": 12340, "name": "MainProcess"}, "thread": {"id": 5424, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:01:37.109164+09:00", "timestamp": 1752919297.109164}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:06.994363", "seconds": 6.994363}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 27204, "name": "MainProcess"}, "thread": {"id": 20096, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:03:05.155422+09:00", "timestamp": 1752919385.155422}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:06.994820", "seconds": 6.99482}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 27204, "name": "MainProcess"}, "thread": {"id": 20096, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:03:05.155879+09:00", "timestamp": 1752919385.155879}}}
{"text": "Running evaluation for query: water_filtration_membrane_002\n", "record": {"elapsed": {"repr": "0:00:45.840613", "seconds": 45.840613}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 27204, "name": "MainProcess"}, "thread": {"id": 20096, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:03:44.001672+09:00", "timestamp": 1752919424.001672}}}
{"text": "Running evaluation for query: autonomous_driving_sensor_fusion_003\n", "record": {"elapsed": {"repr": "0:01:22.699466", "seconds": 82.699466}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 27204, "name": "MainProcess"}, "thread": {"id": 20096, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:04:20.860525+09:00", "timestamp": 1752919460.860525}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:01:51.419949", "seconds": 111.419949}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 27204, "name": "MainProcess"}, "thread": {"id": 20096, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:04:49.581008+09:00", "timestamp": 1752919489.581008}}}
{"text": "Starting RAGAs evaluation within metrics.py...\n", "record": {"elapsed": {"repr": "0:01:51.425995", "seconds": 111.425995}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 30, "message": "Starting RAGAs evaluation within metrics.py...", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 27204, "name": "MainProcess"}, "thread": {"id": 20096, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:04:49.587054+09:00", "timestamp": 1752919489.587054}}}
{"text": "RAGAs evaluation completed successfully within metrics.py.\n", "record": {"elapsed": {"repr": "0:02:48.863247", "seconds": 168.863247}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 34, "message": "RAGAs evaluation completed successfully within metrics.py.", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 27204, "name": "MainProcess"}, "thread": {"id": 20096, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:05:47.024306+09:00", "timestamp": 1752919547.024306}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:02:48.863533", "seconds": 168.863533}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 27204, "name": "MainProcess"}, "thread": {"id": 20096, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:05:47.024592+09:00", "timestamp": 1752919547.024592}}}
{"text": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>\n", "record": {"elapsed": {"repr": "0:02:48.863634", "seconds": 168.863634}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 110, "message": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>", "module": "run_evaluation", "name": "__main__", "process": {"id": 27204, "name": "MainProcess"}, "thread": {"id": 20096, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:05:47.024693+09:00", "timestamp": 1752919547.024693}}}
{"text": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']\n", "record": {"elapsed": {"repr": "0:02:48.863779", "seconds": 168.863779}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 111, "message": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']", "module": "run_evaluation", "name": "__main__", "process": {"id": 27204, "name": "MainProcess"}, "thread": {"id": 20096, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:05:47.024838+09:00", "timestamp": 1752919547.024838}}}
{"text": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json\n", "record": {"elapsed": {"repr": "0:02:48.866191", "seconds": 168.866191}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 121, "message": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json", "module": "run_evaluation", "name": "__main__", "process": {"id": 27204, "name": "MainProcess"}, "thread": {"id": 20096, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:05:47.027250+09:00", "timestamp": 1752919547.02725}}}
{"text": "{\n  \"faithfulness\": 0.8533724340175953,\n  \"answer_relevancy\": 0.7770897423306512\n}\n", "record": {"elapsed": {"repr": "0:02:48.866347", "seconds": 168.866347}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 122, "message": "{\n  \"faithfulness\": 0.8533724340175953,\n  \"answer_relevancy\": 0.7770897423306512\n}", "module": "run_evaluation", "name": "__main__", "process": {"id": 27204, "name": "MainProcess"}, "thread": {"id": 20096, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:05:47.027406+09:00", "timestamp": 1752919547.027406}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:06.864880", "seconds": 6.86488}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 7912, "name": "MainProcess"}, "thread": {"id": 24504, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:06:50.944478+09:00", "timestamp": 1752919610.944478}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:06.865316", "seconds": 6.865316}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 7912, "name": "MainProcess"}, "thread": {"id": 24504, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:06:50.944914+09:00", "timestamp": 1752919610.944914}}}
{"text": "Running evaluation for query: water_filtration_membrane_002\n", "record": {"elapsed": {"repr": "0:00:33.306934", "seconds": 33.306934}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 7912, "name": "MainProcess"}, "thread": {"id": 24504, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:07:17.386532+09:00", "timestamp": 1752919637.386532}}}
{"text": "Running evaluation for query: autonomous_driving_sensor_fusion_003\n", "record": {"elapsed": {"repr": "0:01:09.132745", "seconds": 69.132745}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 7912, "name": "MainProcess"}, "thread": {"id": 24504, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:07:53.212343+09:00", "timestamp": 1752919673.212343}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:01:40.825675", "seconds": 100.825675}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 7912, "name": "MainProcess"}, "thread": {"id": 24504, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:08:24.905273+09:00", "timestamp": 1752919704.905273}}}
{"text": "Starting RAGAs evaluation within metrics.py...\n", "record": {"elapsed": {"repr": "0:01:40.831216", "seconds": 100.831216}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 30, "message": "Starting RAGAs evaluation within metrics.py...", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 7912, "name": "MainProcess"}, "thread": {"id": 24504, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:08:24.910814+09:00", "timestamp": 1752919704.910814}}}
{"text": "RAGAs evaluation completed successfully within metrics.py.\n", "record": {"elapsed": {"repr": "0:02:38.955455", "seconds": 158.955455}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 34, "message": "RAGAs evaluation completed successfully within metrics.py.", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 7912, "name": "MainProcess"}, "thread": {"id": 24504, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:09:23.035053+09:00", "timestamp": 1752919763.035053}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:02:38.955652", "seconds": 158.955652}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 7912, "name": "MainProcess"}, "thread": {"id": 24504, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:09:23.035250+09:00", "timestamp": 1752919763.03525}}}
{"text": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>\n", "record": {"elapsed": {"repr": "0:02:38.955809", "seconds": 158.955809}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 110, "message": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>", "module": "run_evaluation", "name": "__main__", "process": {"id": 7912, "name": "MainProcess"}, "thread": {"id": 24504, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:09:23.035407+09:00", "timestamp": 1752919763.035407}}}
{"text": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']\n", "record": {"elapsed": {"repr": "0:02:38.955951", "seconds": 158.955951}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 111, "message": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']", "module": "run_evaluation", "name": "__main__", "process": {"id": 7912, "name": "MainProcess"}, "thread": {"id": 24504, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:09:23.035549+09:00", "timestamp": 1752919763.035549}}}
{"text": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json\n", "record": {"elapsed": {"repr": "0:02:38.957788", "seconds": 158.957788}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 121, "message": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json", "module": "run_evaluation", "name": "__main__", "process": {"id": 7912, "name": "MainProcess"}, "thread": {"id": 24504, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:09:23.037386+09:00", "timestamp": 1752919763.037386}}}
{"text": "{\n  \"faithfulness\": 0.7124368686868686,\n  \"answer_relevancy\": 0.7799805651191876\n}\n", "record": {"elapsed": {"repr": "0:02:38.957914", "seconds": 158.957914}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 122, "message": "{\n  \"faithfulness\": 0.7124368686868686,\n  \"answer_relevancy\": 0.7799805651191876\n}", "module": "run_evaluation", "name": "__main__", "process": {"id": 7912, "name": "MainProcess"}, "thread": {"id": 24504, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:09:23.037512+09:00", "timestamp": 1752919763.037512}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:08.239783", "seconds": 8.239783}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 7856, "name": "MainProcess"}, "thread": {"id": 9240, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:10:47.294378+09:00", "timestamp": 1752919847.294378}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:08.240355", "seconds": 8.240355}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 7856, "name": "MainProcess"}, "thread": {"id": 9240, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:10:47.294950+09:00", "timestamp": 1752919847.29495}}}
{"text": "Running evaluation for query: water_filtration_membrane_002\n", "record": {"elapsed": {"repr": "0:00:38.607606", "seconds": 38.607606}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 7856, "name": "MainProcess"}, "thread": {"id": 9240, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:11:17.662201+09:00", "timestamp": 1752919877.662201}}}
{"text": "Running evaluation for query: autonomous_driving_sensor_fusion_003\n", "record": {"elapsed": {"repr": "0:01:05.328349", "seconds": 65.328349}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 7856, "name": "MainProcess"}, "thread": {"id": 9240, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:11:44.382944+09:00", "timestamp": 1752919904.382944}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:01:39.930887", "seconds": 99.930887}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 7856, "name": "MainProcess"}, "thread": {"id": 9240, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:12:18.985482+09:00", "timestamp": 1752919938.985482}}}
{"text": "Starting RAGAs evaluation within metrics.py...\n", "record": {"elapsed": {"repr": "0:01:39.939316", "seconds": 99.939316}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 30, "message": "Starting RAGAs evaluation within metrics.py...", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 7856, "name": "MainProcess"}, "thread": {"id": 9240, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:12:18.993911+09:00", "timestamp": 1752919938.993911}}}
{"text": "RAGAs evaluation completed successfully within metrics.py.\n", "record": {"elapsed": {"repr": "0:02:50.428960", "seconds": 170.42896}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 34, "message": "RAGAs evaluation completed successfully within metrics.py.", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 7856, "name": "MainProcess"}, "thread": {"id": 9240, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:13:29.483555+09:00", "timestamp": 1752920009.483555}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:02:50.429259", "seconds": 170.429259}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 7856, "name": "MainProcess"}, "thread": {"id": 9240, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:13:29.483854+09:00", "timestamp": 1752920009.483854}}}
{"text": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>\n", "record": {"elapsed": {"repr": "0:02:50.429440", "seconds": 170.42944}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 110, "message": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>", "module": "run_evaluation", "name": "__main__", "process": {"id": 7856, "name": "MainProcess"}, "thread": {"id": 9240, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:13:29.484035+09:00", "timestamp": 1752920009.484035}}}
{"text": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']\n", "record": {"elapsed": {"repr": "0:02:50.429623", "seconds": 170.429623}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 111, "message": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']", "module": "run_evaluation", "name": "__main__", "process": {"id": 7856, "name": "MainProcess"}, "thread": {"id": 9240, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:13:29.484218+09:00", "timestamp": 1752920009.484218}}}
{"text": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json\n", "record": {"elapsed": {"repr": "0:02:50.432094", "seconds": 170.432094}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 121, "message": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json", "module": "run_evaluation", "name": "__main__", "process": {"id": 7856, "name": "MainProcess"}, "thread": {"id": 9240, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:13:29.486689+09:00", "timestamp": 1752920009.486689}}}
{"text": "{\n  \"faithfulness\": 0.6652862294343024,\n  \"answer_relevancy\": 0.7731058728401435\n}\n", "record": {"elapsed": {"repr": "0:02:50.432317", "seconds": 170.432317}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 122, "message": "{\n  \"faithfulness\": 0.6652862294343024,\n  \"answer_relevancy\": 0.7731058728401435\n}", "module": "run_evaluation", "name": "__main__", "process": {"id": 7856, "name": "MainProcess"}, "thread": {"id": 9240, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:13:29.486912+09:00", "timestamp": 1752920009.486912}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:07.259190", "seconds": 7.25919}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 3652, "name": "MainProcess"}, "thread": {"id": 7104, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:15:10.586339+09:00", "timestamp": 1752920110.586339}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:07.260240", "seconds": 7.26024}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 3652, "name": "MainProcess"}, "thread": {"id": 7104, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:15:10.587389+09:00", "timestamp": 1752920110.587389}}}
{"text": "Running evaluation for query: water_filtration_membrane_002\n", "record": {"elapsed": {"repr": "0:00:41.898546", "seconds": 41.898546}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 3652, "name": "MainProcess"}, "thread": {"id": 7104, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:15:45.225695+09:00", "timestamp": 1752920145.225695}}}
{"text": "Running evaluation for query: autonomous_driving_sensor_fusion_003\n", "record": {"elapsed": {"repr": "0:01:15.897313", "seconds": 75.897313}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 3652, "name": "MainProcess"}, "thread": {"id": 7104, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:16:19.224462+09:00", "timestamp": 1752920179.224462}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:01:53.580932", "seconds": 113.580932}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 3652, "name": "MainProcess"}, "thread": {"id": 7104, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:16:56.908081+09:00", "timestamp": 1752920216.908081}}}
{"text": "Starting RAGAs evaluation within metrics.py...\n", "record": {"elapsed": {"repr": "0:01:53.590693", "seconds": 113.590693}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 31, "message": "Starting RAGAs evaluation within metrics.py...", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 3652, "name": "MainProcess"}, "thread": {"id": 7104, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:16:56.917842+09:00", "timestamp": 1752920216.917842}}}
{"text": "Error during RAGAs evaluation in metrics.py: The metric [semantic_similarity] that is used requires the following additional columns ['reference'] to be present in the dataset.\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 142, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000001F0C19DB9C0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 100, in main\n    ragas_result = evaluate_with_ragas(evaluation_results_for_ragas)\n                   │                   └ [{'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'answer': '1. 各特許の核心技術を1〜2文で要約する。\\n\\n- CN-116194262-A: ヘアスタイルの長さを段階的に調整するためのユニバ...\n                   └ <function evaluate_with_ragas at 0x000001F0C19DB7E0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py\", line 34, in evaluate_with_ragas\n    result = evaluate(ds, metrics)\n             │        │   └ [Faithfulness(_required_columns={<MetricType.SINGLE_TURN: 'single_turn'>: {'user_input', 'retrieved_contexts', 'response'}}, ...\n             │        └ Dataset({\n             │              features: ['question', 'answer', 'contexts', 'reference'],\n             │              num_rows: 3\n             │          })\n             └ <function evaluate at 0x000001F0C25D5300>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\ragas\\_analytics.py\", line 227, in wrapper\n    result = func(*args, **kwargs)\n             │     │       └ {}\n             │     └ (Dataset({\n             │           features: ['question', 'answer', 'contexts', 'reference'],\n             │           num_rows: 3\n             │       }), [Faithfulness(_required_columns...\n             └ <function evaluate at 0x000001F0C1A30C20>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\ragas\\evaluation.py\", line 176, in evaluate\n    validate_required_columns(dataset, metrics)\n    │                         │        └ [Faithfulness(_required_columns={<MetricType.SINGLE_TURN: 'single_turn'>: {'user_input', 'retrieved_contexts', 'response'}}, ...\n    │                         └ EvaluationDataset(features=['user_input', 'retrieved_contexts', 'response'], len=3)\n    └ <function validate_required_columns at 0x000001F0C279F420>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\ragas\\validation.py\", line 63, in validate_required_columns\n    raise ValueError(\n\nValueError: The metric [semantic_similarity] that is used requires the following additional columns ['reference'] to be present in the dataset.\n", "record": {"elapsed": {"repr": "0:01:54.297771", "seconds": 114.297771}, "exception": {"type": "ValueError", "value": "The metric [semantic_similarity] that is used requires the following additional columns ['reference'] to be present in the dataset.", "traceback": true}, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 37, "message": "Error during RAGAs evaluation in metrics.py: The metric [semantic_similarity] that is used requires the following additional columns ['reference'] to be present in the dataset.", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 3652, "name": "MainProcess"}, "thread": {"id": 7104, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:16:57.624920+09:00", "timestamp": 1752920217.62492}}}
{"text": "RAGAs evaluation failed: evaluate_with_ragas returned None.\n", "record": {"elapsed": {"repr": "0:01:54.301057", "seconds": 114.301057}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 103, "message": "RAGAs evaluation failed: evaluate_with_ragas returned None.", "module": "run_evaluation", "name": "__main__", "process": {"id": 3652, "name": "MainProcess"}, "thread": {"id": 7104, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:16:57.628206+09:00", "timestamp": 1752920217.628206}}}
{"text": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json\n", "record": {"elapsed": {"repr": "0:01:54.302259", "seconds": 114.302259}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 121, "message": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json", "module": "run_evaluation", "name": "__main__", "process": {"id": 3652, "name": "MainProcess"}, "thread": {"id": 7104, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:16:57.629408+09:00", "timestamp": 1752920217.629408}}}
{"text": "{\n  \"error\": \"RAGAs evaluation failed.\"\n}\n", "record": {"elapsed": {"repr": "0:01:54.302560", "seconds": 114.30256}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 122, "message": "{\n  \"error\": \"RAGAs evaluation failed.\"\n}", "module": "run_evaluation", "name": "__main__", "process": {"id": 3652, "name": "MainProcess"}, "thread": {"id": 7104, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:16:57.629709+09:00", "timestamp": 1752920217.629709}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:09.198589", "seconds": 9.198589}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 16360, "name": "MainProcess"}, "thread": {"id": 14400, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:18:45.218846+09:00", "timestamp": 1752920325.218846}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:09.199687", "seconds": 9.199687}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 16360, "name": "MainProcess"}, "thread": {"id": 14400, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:18:45.219944+09:00", "timestamp": 1752920325.219944}}}
{"text": "Running evaluation for query: water_filtration_membrane_002\n", "record": {"elapsed": {"repr": "0:00:42.201417", "seconds": 42.201417}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 16360, "name": "MainProcess"}, "thread": {"id": 14400, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:19:18.221674+09:00", "timestamp": 1752920358.221674}}}
{"text": "Running evaluation for query: autonomous_driving_sensor_fusion_003\n", "record": {"elapsed": {"repr": "0:01:15.175836", "seconds": 75.175836}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 16360, "name": "MainProcess"}, "thread": {"id": 14400, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:19:51.196093+09:00", "timestamp": 1752920391.196093}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:01:47.827968", "seconds": 107.827968}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 16360, "name": "MainProcess"}, "thread": {"id": 14400, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:20:23.848225+09:00", "timestamp": 1752920423.848225}}}
{"text": "Starting RAGAs evaluation within metrics.py...\n", "record": {"elapsed": {"repr": "0:01:47.834125", "seconds": 107.834125}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 30, "message": "Starting RAGAs evaluation within metrics.py...", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 16360, "name": "MainProcess"}, "thread": {"id": 14400, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:20:23.854382+09:00", "timestamp": 1752920423.854382}}}
{"text": "RAGAs evaluation completed successfully within metrics.py.\n", "record": {"elapsed": {"repr": "0:02:40.460382", "seconds": 160.460382}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 34, "message": "RAGAs evaluation completed successfully within metrics.py.", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 16360, "name": "MainProcess"}, "thread": {"id": 14400, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:21:16.480639+09:00", "timestamp": 1752920476.480639}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:02:40.460844", "seconds": 160.460844}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 16360, "name": "MainProcess"}, "thread": {"id": 14400, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:21:16.481101+09:00", "timestamp": 1752920476.481101}}}
{"text": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>\n", "record": {"elapsed": {"repr": "0:02:40.461068", "seconds": 160.461068}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 110, "message": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>", "module": "run_evaluation", "name": "__main__", "process": {"id": 16360, "name": "MainProcess"}, "thread": {"id": 14400, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:21:16.481325+09:00", "timestamp": 1752920476.481325}}}
{"text": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']\n", "record": {"elapsed": {"repr": "0:02:40.461462", "seconds": 160.461462}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 111, "message": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']", "module": "run_evaluation", "name": "__main__", "process": {"id": 16360, "name": "MainProcess"}, "thread": {"id": 14400, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:21:16.481719+09:00", "timestamp": 1752920476.481719}}}
{"text": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json\n", "record": {"elapsed": {"repr": "0:02:40.463269", "seconds": 160.463269}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 121, "message": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json", "module": "run_evaluation", "name": "__main__", "process": {"id": 16360, "name": "MainProcess"}, "thread": {"id": 14400, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:21:16.483526+09:00", "timestamp": 1752920476.483526}}}
{"text": "{\n  \"faithfulness\": 0.8379416282642089,\n  \"answer_relevancy\": 0.7765358764058193\n}\n", "record": {"elapsed": {"repr": "0:02:40.463484", "seconds": 160.463484}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 122, "message": "{\n  \"faithfulness\": 0.8379416282642089,\n  \"answer_relevancy\": 0.7765358764058193\n}", "module": "run_evaluation", "name": "__main__", "process": {"id": 16360, "name": "MainProcess"}, "thread": {"id": 14400, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:21:16.483741+09:00", "timestamp": 1752920476.483741}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:08.203220", "seconds": 8.20322}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 17424, "name": "MainProcess"}, "thread": {"id": 24948, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:22:37.779333+09:00", "timestamp": 1752920557.779333}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:08.204151", "seconds": 8.204151}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 17424, "name": "MainProcess"}, "thread": {"id": 24948, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:22:37.780264+09:00", "timestamp": 1752920557.780264}}}
{"text": "Running evaluation for query: water_filtration_membrane_002\n", "record": {"elapsed": {"repr": "0:00:47.653380", "seconds": 47.65338}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 17424, "name": "MainProcess"}, "thread": {"id": 24948, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:23:17.229493+09:00", "timestamp": 1752920597.229493}}}
{"text": "Running evaluation for query: autonomous_driving_sensor_fusion_003\n", "record": {"elapsed": {"repr": "0:01:30.893700", "seconds": 90.8937}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 17424, "name": "MainProcess"}, "thread": {"id": 24948, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:24:00.469813+09:00", "timestamp": 1752920640.469813}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:02:04.412835", "seconds": 124.412835}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 17424, "name": "MainProcess"}, "thread": {"id": 24948, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:24:33.988948+09:00", "timestamp": 1752920673.988948}}}
{"text": "Starting RAGAs evaluation within metrics.py...\n", "record": {"elapsed": {"repr": "0:02:04.418189", "seconds": 124.418189}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 30, "message": "Starting RAGAs evaluation within metrics.py...", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 17424, "name": "MainProcess"}, "thread": {"id": 24948, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:24:33.994302+09:00", "timestamp": 1752920673.994302}}}
{"text": "RAGAs evaluation completed successfully within metrics.py.\n", "record": {"elapsed": {"repr": "0:02:50.793918", "seconds": 170.793918}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 34, "message": "RAGAs evaluation completed successfully within metrics.py.", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 17424, "name": "MainProcess"}, "thread": {"id": 24948, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:25:20.370031+09:00", "timestamp": 1752920720.370031}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:02:50.794164", "seconds": 170.794164}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 17424, "name": "MainProcess"}, "thread": {"id": 24948, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:25:20.370277+09:00", "timestamp": 1752920720.370277}}}
{"text": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>\n", "record": {"elapsed": {"repr": "0:02:50.794258", "seconds": 170.794258}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 110, "message": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>", "module": "run_evaluation", "name": "__main__", "process": {"id": 17424, "name": "MainProcess"}, "thread": {"id": 24948, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:25:20.370371+09:00", "timestamp": 1752920720.370371}}}
{"text": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']\n", "record": {"elapsed": {"repr": "0:02:50.794368", "seconds": 170.794368}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 111, "message": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']", "module": "run_evaluation", "name": "__main__", "process": {"id": 17424, "name": "MainProcess"}, "thread": {"id": 24948, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:25:20.370481+09:00", "timestamp": 1752920720.370481}}}
{"text": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json\n", "record": {"elapsed": {"repr": "0:02:50.796289", "seconds": 170.796289}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 121, "message": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json", "module": "run_evaluation", "name": "__main__", "process": {"id": 17424, "name": "MainProcess"}, "thread": {"id": 24948, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:25:20.372402+09:00", "timestamp": 1752920720.372402}}}
{"text": "{\n  \"faithfulness\": 0.6458846469622331,\n  \"answer_relevancy\": 0.7790819809050856\n}\n", "record": {"elapsed": {"repr": "0:02:50.796516", "seconds": 170.796516}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 122, "message": "{\n  \"faithfulness\": 0.6458846469622331,\n  \"answer_relevancy\": 0.7790819809050856\n}", "module": "run_evaluation", "name": "__main__", "process": {"id": 17424, "name": "MainProcess"}, "thread": {"id": 24948, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:25:20.372629+09:00", "timestamp": 1752920720.372629}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:07.919328", "seconds": 7.919328}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 22844, "name": "MainProcess"}, "thread": {"id": 16604, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:32:58.635312+09:00", "timestamp": 1752921178.635312}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:07.920304", "seconds": 7.920304}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 22844, "name": "MainProcess"}, "thread": {"id": 16604, "name": "MainThread"}, "time": {"repr": "2025-07-19 19:32:58.636288+09:00", "timestamp": 1752921178.636288}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:12.850311", "seconds": 12.850311}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 12128, "name": "MainProcess"}, "thread": {"id": 21276, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:11:53.877094+09:00", "timestamp": 1752930713.877094}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:12.851347", "seconds": 12.851347}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 12128, "name": "MainProcess"}, "thread": {"id": 21276, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:11:53.878130+09:00", "timestamp": 1752930713.87813}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 142, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000002BE7B1FCA40>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 84, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          │                     └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          └ <function run_single_evaluation at 0x000002BE7B1ABB00>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                   └ <function execute_patent_search_workflow at 0x000002BE7B1AB740>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                  │                    └ <function Pregel.invoke at 0x000002BE56728040>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x000002BE7B1B5E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x000002BE56717EC0>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x000002BE7B1B5E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x000002BE56714D60>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x000002BE7BFEA660>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x000002BE56714540>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch:to:summariz...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='summarize_selected_patents', input=AppState(chat_history=[], plan_text='This is a dummy plan text ...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='summarize_selected_patents', input=AppState(chat_history=[], plan_text='This is a dummy plan text ...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch:to:summariz...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n            │       │   │    └ <function RunnableCallable.invoke at 0x000002BE566D7920>\n            │       │   └ summarize_selected_patents(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x000002BE7C04C200>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 1...\n          │    └ <function summarize_selected_patents at 0x000002BE7B1A9F80>\n          └ summarize_selected_patents(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 286, in summarize_selected_patents\n    state.summary_result = chain.invoke({\"patent_list\": patent_list_str, \"plan_text\": state.plan_text}).content\n    │     │                │     │                      │                             │     └ 'This is a dummy plan text for evaluation.'\n    │     │                │     │                      │                             └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n    │     │                │     │                      └ 'publication_number                                                                                                          ...\n    │     │                │     └ <function RunnableSequence.invoke at 0x000002BE55D73240>\n    │     │                └ ChatPromptTemplate(input_variables=['patent_list', 'plan_text'], input_types={}, partial_variables={}, messages=[HumanMessage...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content='あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複数の特許情報について、それぞれの要点をまとめ、元の質問（調査方針）に最...\n             │       │   │    └ <function BaseChatModel.invoke at 0x000002BE592CE7A0>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002BE7B06ECF0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x000002BE7C0F6080>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x000002BE592CEF20>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002BE7B06ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x000002BE7AC847D0>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content='あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複数の特許情報について、それぞれの要点をまとめ、元の質問（調査方針）に最も関連性の高い情報を強調しながら解説してください...\n           │    └ <function BaseChatModel.generate at 0x000002BE592CEDE0>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002BE7B06ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x000002BE592CF060>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002BE7B06ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x000002BE557296C0>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002BE7B06ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': 'あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複...\n               │    │      └ <function Completions.create at 0x000002BE7AE0B240>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x000002BE7B06ECF0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002BE7B06ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': 'あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x000002BE7B06ECF0>,)\n           └ <function Completions.create at 0x000002BE7AE0B100>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x000002BE7AD402F0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x000002BE7B06ECF0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x000002BE590F8720>\n           │    │          └ <openai.OpenAI object at 0x000002BE7AD402F0>\n           │    └ ~ResponseT\n           └ <function cast at 0x000002BE50F61760>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x000002BE590EAE80>\n          └ <openai.OpenAI object at 0x000002BE7AD402F0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 74915. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}\nDuring task with name 'summarize_selected_patents' and id '1ec9eabe-3b82-e538-b30b-2af6d9198810'\n", "record": {"elapsed": {"repr": "0:00:37.741800", "seconds": 37.7418}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 74915. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 71, "message": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 12128, "name": "MainProcess"}, "thread": {"id": 21276, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:12:18.768583+09:00", "timestamp": 1752930738.768583}}}
{"text": "Running evaluation for query: water_filtration_membrane_002\n", "record": {"elapsed": {"repr": "0:00:38.001544", "seconds": 38.001544}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 12128, "name": "MainProcess"}, "thread": {"id": 21276, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:12:19.028327+09:00", "timestamp": 1752930739.028327}}}
{"text": "Running evaluation for query: autonomous_driving_sensor_fusion_003\n", "record": {"elapsed": {"repr": "0:01:08.231013", "seconds": 68.231013}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 12128, "name": "MainProcess"}, "thread": {"id": 21276, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:12:49.257796+09:00", "timestamp": 1752930769.257796}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for autonomous_driving_sensor_fusion_003\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 142, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000002BE7B1FCA40>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 84, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'autonomous_driving_sensor_fusion_003', 'question': '自動運転におけるセンサーフュージョン技術の特許を調べてください。カメラとLiDARの組み合わせに興味があります。', ...\n                          │                     └ {'query_id': 'autonomous_driving_sensor_fusion_003', 'question': '自動運転におけるセンサーフュージョン技術の特許を調べてください。カメラとLiDARの組み合わせに興味があります。', ...\n                          └ <function run_single_evaluation at 0x000002BE7B1ABB00>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n                   └ <function execute_patent_search_workflow at 0x000002BE7B1AB740>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n                  │                    └ <function Pregel.invoke at 0x000002BE56728040>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x000002BE7B1B5E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x000002BE56717EC0>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x000002BE7B1B5E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x000002BE56714D60>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x000002BE7C0EB250>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x000002BE56714540>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch:to:summariz...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='summarize_selected_patents', input=AppState(chat_history=[], plan_text='This is a dummy plan text ...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='summarize_selected_patents', input=AppState(chat_history=[], plan_text='This is a dummy plan text ...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch:to:summariz...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n            │       │   │    └ <function RunnableCallable.invoke at 0x000002BE566D7920>\n            │       │   └ summarize_selected_patents(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x000002BE7C059400>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1...\n          │    └ <function summarize_selected_patents at 0x000002BE7B1A9F80>\n          └ summarize_selected_patents(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 286, in summarize_selected_patents\n    state.summary_result = chain.invoke({\"patent_list\": patent_list_str, \"plan_text\": state.plan_text}).content\n    │     │                │     │                      │                             │     └ 'This is a dummy plan text for evaluation.'\n    │     │                │     │                      │                             └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n    │     │                │     │                      └ 'publication_number                                                                                                          ...\n    │     │                │     └ <function RunnableSequence.invoke at 0x000002BE55D73240>\n    │     │                └ ChatPromptTemplate(input_variables=['patent_list', 'plan_text'], input_types={}, partial_variables={}, messages=[HumanMessage...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content='あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複数の特許情報について、それぞれの要点をまとめ、元の質問（調査方針）に最...\n             │       │   │    └ <function BaseChatModel.invoke at 0x000002BE592CE7A0>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002BE7B06ECF0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x000002BE7D4EA880>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x000002BE592CEF20>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002BE7B06ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x000002BE7DE63650>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content='あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複数の特許情報について、それぞれの要点をまとめ、元の質問（調査方針）に最も関連性の高い情報を強調しながら解説してください...\n           │    └ <function BaseChatModel.generate at 0x000002BE592CEDE0>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002BE7B06ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x000002BE592CF060>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002BE7B06ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x000002BE557296C0>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002BE7B06ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': 'あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複...\n               │    │      └ <function Completions.create at 0x000002BE7AE0B240>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x000002BE7B06ECF0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002BE7B06ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': 'あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x000002BE7B06ECF0>,)\n           └ <function Completions.create at 0x000002BE7AE0B100>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x000002BE7AD402F0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x000002BE7B06ECF0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x000002BE590F8720>\n           │    │          └ <openai.OpenAI object at 0x000002BE7AD402F0>\n           │    └ ~ResponseT\n           └ <function cast at 0x000002BE50F61760>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x000002BE590EAE80>\n          └ <openai.OpenAI object at 0x000002BE7AD402F0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 61700. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}\nDuring task with name 'summarize_selected_patents' and id 'd831f1db-cb56-aad9-5887-d953e8fc63e2'\n", "record": {"elapsed": {"repr": "0:01:33.522921", "seconds": 93.522921}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 61700. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 71, "message": "  [FATAL] An unexpected exception occurred in workflow execution for autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 12128, "name": "MainProcess"}, "thread": {"id": 21276, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:13:14.549704+09:00", "timestamp": 1752930794.549704}}}
{"text": "Skipping RAGAs evaluation for image_recognition_ai_001 due to error: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 74915. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}\n", "record": {"elapsed": {"repr": "0:01:33.736813", "seconds": 93.736813}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 89, "message": "Skipping RAGAs evaluation for image_recognition_ai_001 due to error: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 74915. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 12128, "name": "MainProcess"}, "thread": {"id": 21276, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:13:14.763596+09:00", "timestamp": 1752930794.763596}}}
{"text": "Skipping RAGAs evaluation for autonomous_driving_sensor_fusion_003 due to error: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 61700. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}\n", "record": {"elapsed": {"repr": "0:01:33.737965", "seconds": 93.737965}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 89, "message": "Skipping RAGAs evaluation for autonomous_driving_sensor_fusion_003 due to error: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 61700. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 12128, "name": "MainProcess"}, "thread": {"id": 21276, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:13:14.764748+09:00", "timestamp": 1752930794.764748}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:01:33.738227", "seconds": 93.738227}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 12128, "name": "MainProcess"}, "thread": {"id": 21276, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:13:14.765010+09:00", "timestamp": 1752930794.76501}}}
{"text": "Starting RAGAs evaluation within metrics.py...\n", "record": {"elapsed": {"repr": "0:01:33.749608", "seconds": 93.749608}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 30, "message": "Starting RAGAs evaluation within metrics.py...", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 12128, "name": "MainProcess"}, "thread": {"id": 21276, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:13:14.776391+09:00", "timestamp": 1752930794.776391}}}
{"text": "RAGAs evaluation completed successfully within metrics.py.\n", "record": {"elapsed": {"repr": "0:02:13.181855", "seconds": 133.181855}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 34, "message": "RAGAs evaluation completed successfully within metrics.py.", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 12128, "name": "MainProcess"}, "thread": {"id": 21276, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:13:54.208638+09:00", "timestamp": 1752930834.208638}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:02:13.182226", "seconds": 133.182226}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 12128, "name": "MainProcess"}, "thread": {"id": 21276, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:13:54.209009+09:00", "timestamp": 1752930834.209009}}}
{"text": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>\n", "record": {"elapsed": {"repr": "0:02:13.182378", "seconds": 133.182378}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 110, "message": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>", "module": "run_evaluation", "name": "__main__", "process": {"id": 12128, "name": "MainProcess"}, "thread": {"id": 21276, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:13:54.209161+09:00", "timestamp": 1752930834.209161}}}
{"text": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']\n", "record": {"elapsed": {"repr": "0:02:13.182542", "seconds": 133.182542}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 111, "message": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']", "module": "run_evaluation", "name": "__main__", "process": {"id": 12128, "name": "MainProcess"}, "thread": {"id": 21276, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:13:54.209325+09:00", "timestamp": 1752930834.209325}}}
{"text": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json\n", "record": {"elapsed": {"repr": "0:02:13.185456", "seconds": 133.185456}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 121, "message": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json", "module": "run_evaluation", "name": "__main__", "process": {"id": 12128, "name": "MainProcess"}, "thread": {"id": 21276, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:13:54.212239+09:00", "timestamp": 1752930834.212239}}}
{"text": "{\n  \"faithfulness\": 0.56,\n  \"answer_relevancy\": 0.0\n}\n", "record": {"elapsed": {"repr": "0:02:13.185698", "seconds": 133.185698}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 122, "message": "{\n  \"faithfulness\": 0.56,\n  \"answer_relevancy\": 0.0\n}", "module": "run_evaluation", "name": "__main__", "process": {"id": 12128, "name": "MainProcess"}, "thread": {"id": 21276, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:13:54.212481+09:00", "timestamp": 1752930834.212481}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:12.137491", "seconds": 12.137491}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 81, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 27212, "name": "MainProcess"}, "thread": {"id": 24288, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:14:20.855394+09:00", "timestamp": 1752930860.855394}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:12.138547", "seconds": 12.138547}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 27212, "name": "MainProcess"}, "thread": {"id": 24288, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:14:20.856450+09:00", "timestamp": 1752930860.85645}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 142, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x0000022754560A40>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 84, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          │                     └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          └ <function run_single_evaluation at 0x000002275450BB00>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                   └ <function execute_patent_search_workflow at 0x000002275450B740>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                  │                    └ <function Pregel.invoke at 0x000002272FA18040>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x0000022754515E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x000002272FA07EC0>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x0000022754515E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x000002272FA04D60>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x00000227552EA660>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x000002272FA04540>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch:to:summariz...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='summarize_selected_patents', input=AppState(chat_history=[], plan_text='This is a dummy plan text ...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='summarize_selected_patents', input=AppState(chat_history=[], plan_text='This is a dummy plan text ...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch:to:summariz...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n            │       │   │    └ <function RunnableCallable.invoke at 0x000002272F9C7920>\n            │       │   └ summarize_selected_patents(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x000002275534C440>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 1...\n          │    └ <function summarize_selected_patents at 0x0000022754509F80>\n          └ summarize_selected_patents(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 286, in summarize_selected_patents\n    state.summary_result = chain.invoke({\"patent_list\": patent_list_str, \"plan_text\": state.plan_text}).content\n    │     │                │     │                      │                             │     └ 'This is a dummy plan text for evaluation.'\n    │     │                │     │                      │                             └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n    │     │                │     │                      └ 'publication_number                                                                                                          ...\n    │     │                │     └ <function RunnableSequence.invoke at 0x000002272F05F240>\n    │     │                └ ChatPromptTemplate(input_variables=['patent_list', 'plan_text'], input_types={}, partial_variables={}, messages=[HumanMessage...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content='あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複数の特許情報について、それぞれの要点をまとめ、元の質問（調査方針）に最...\n             │       │   │    └ <function BaseChatModel.invoke at 0x00000227326327A0>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000227543CECF0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x00000227553FC3C0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x0000022732632F20>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000227543CECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x0000022753FE47D0>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content='あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複数の特許情報について、それぞれの要点をまとめ、元の質問（調査方針）に最も関連性の高い情報を強調しながら解説してください...\n           │    └ <function BaseChatModel.generate at 0x0000022732632DE0>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000227543CECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x0000022732633060>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000227543CECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x000002272EA296C0>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000227543CECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': 'あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複...\n               │    │      └ <function Completions.create at 0x0000022754173240>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x00000227543CECF0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000227543CECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': 'あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x00000227543CECF0>,)\n           └ <function Completions.create at 0x0000022754173100>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x00000227540A02F0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x00000227543CECF0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x0000022732458720>\n           │    │          └ <openai.OpenAI object at 0x00000227540A02F0>\n           │    └ ~ResponseT\n           └ <function cast at 0x000002272A211760>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x000002273244AE80>\n          └ <openai.OpenAI object at 0x00000227540A02F0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 74915. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}\nDuring task with name 'summarize_selected_patents' and id '55fd2815-8e6f-e7a6-d47a-7feb3c995d97'\n", "record": {"elapsed": {"repr": "0:00:37.511854", "seconds": 37.511854}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 74915. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 71, "message": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 27212, "name": "MainProcess"}, "thread": {"id": 24288, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:14:46.229757+09:00", "timestamp": 1752930886.229757}}}
{"text": "Running evaluation for query: water_filtration_membrane_002\n", "record": {"elapsed": {"repr": "0:00:37.740223", "seconds": 37.740223}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 27212, "name": "MainProcess"}, "thread": {"id": 24288, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:14:46.458126+09:00", "timestamp": 1752930886.458126}}}
{"text": "Running evaluation for query: autonomous_driving_sensor_fusion_003\n", "record": {"elapsed": {"repr": "0:01:12.741736", "seconds": 72.741736}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 27212, "name": "MainProcess"}, "thread": {"id": 24288, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:15:21.459639+09:00", "timestamp": 1752930921.459639}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for autonomous_driving_sensor_fusion_003\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 142, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x0000022754560A40>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 84, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'autonomous_driving_sensor_fusion_003', 'question': '自動運転におけるセンサーフュージョン技術の特許を調べてください。カメラとLiDARの組み合わせに興味があります。', ...\n                          │                     └ {'query_id': 'autonomous_driving_sensor_fusion_003', 'question': '自動運転におけるセンサーフュージョン技術の特許を調べてください。カメラとLiDARの組み合わせに興味があります。', ...\n                          └ <function run_single_evaluation at 0x000002275450BB00>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n                   └ <function execute_patent_search_workflow at 0x000002275450B740>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n                  │                    └ <function Pregel.invoke at 0x000002272FA18040>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x0000022754515E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x000002272FA07EC0>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x0000022754515E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x000002272FA04D60>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x00000227553EB250>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x000002272FA04540>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch:to:summariz...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='summarize_selected_patents', input=AppState(chat_history=[], plan_text='This is a dummy plan text ...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='summarize_selected_patents', input=AppState(chat_history=[], plan_text='This is a dummy plan text ...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch:to:summariz...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n            │       │   │    └ <function RunnableCallable.invoke at 0x000002272F9C7920>\n            │       │   └ summarize_selected_patents(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x0000022755359480>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1...\n          │    └ <function summarize_selected_patents at 0x0000022754509F80>\n          └ summarize_selected_patents(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 286, in summarize_selected_patents\n    state.summary_result = chain.invoke({\"patent_list\": patent_list_str, \"plan_text\": state.plan_text}).content\n    │     │                │     │                      │                             │     └ 'This is a dummy plan text for evaluation.'\n    │     │                │     │                      │                             └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n    │     │                │     │                      └ 'publication_number                                                                                                          ...\n    │     │                │     └ <function RunnableSequence.invoke at 0x000002272F05F240>\n    │     │                └ ChatPromptTemplate(input_variables=['patent_list', 'plan_text'], input_types={}, partial_variables={}, messages=[HumanMessage...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content='あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複数の特許情報について、それぞれの要点をまとめ、元の質問（調査方針）に最...\n             │       │   │    └ <function BaseChatModel.invoke at 0x00000227326327A0>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000227543CECF0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x00000227567A8AC0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x0000022732632F20>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000227543CECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x00000227567835D0>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content='あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複数の特許情報について、それぞれの要点をまとめ、元の質問（調査方針）に最も関連性の高い情報を強調しながら解説してください...\n           │    └ <function BaseChatModel.generate at 0x0000022732632DE0>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000227543CECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x0000022732633060>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000227543CECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x000002272EA296C0>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000227543CECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': 'あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複...\n               │    │      └ <function Completions.create at 0x0000022754173240>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x00000227543CECF0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000227543CECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': 'あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x00000227543CECF0>,)\n           └ <function Completions.create at 0x0000022754173100>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x00000227540A02F0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x00000227543CECF0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x0000022732458720>\n           │    │          └ <openai.OpenAI object at 0x00000227540A02F0>\n           │    └ ~ResponseT\n           └ <function cast at 0x000002272A211760>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x000002273244AE80>\n          └ <openai.OpenAI object at 0x00000227540A02F0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 61700. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}\nDuring task with name 'summarize_selected_patents' and id '8400e35e-0687-1c44-9d44-2a775a496e78'\n", "record": {"elapsed": {"repr": "0:01:34.193957", "seconds": 94.193957}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 61700. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 71, "message": "  [FATAL] An unexpected exception occurred in workflow execution for autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 27212, "name": "MainProcess"}, "thread": {"id": 24288, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:15:42.911860+09:00", "timestamp": 1752930942.91186}}}
{"text": "Skipping RAGAs evaluation for image_recognition_ai_001 due to error: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 74915. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}\n", "record": {"elapsed": {"repr": "0:01:34.418226", "seconds": 94.418226}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 89, "message": "Skipping RAGAs evaluation for image_recognition_ai_001 due to error: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 74915. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 27212, "name": "MainProcess"}, "thread": {"id": 24288, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:15:43.136129+09:00", "timestamp": 1752930943.136129}}}
{"text": "Skipping RAGAs evaluation for autonomous_driving_sensor_fusion_003 due to error: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 61700. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}\n", "record": {"elapsed": {"repr": "0:01:34.418604", "seconds": 94.418604}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 89, "message": "Skipping RAGAs evaluation for autonomous_driving_sensor_fusion_003 due to error: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 61700. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 27212, "name": "MainProcess"}, "thread": {"id": 24288, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:15:43.136507+09:00", "timestamp": 1752930943.136507}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:01:34.418771", "seconds": 94.418771}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 99, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 27212, "name": "MainProcess"}, "thread": {"id": 24288, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:15:43.136674+09:00", "timestamp": 1752930943.136674}}}
{"text": "Starting RAGAs evaluation within metrics.py...\n", "record": {"elapsed": {"repr": "0:01:34.429257", "seconds": 94.429257}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 30, "message": "Starting RAGAs evaluation within metrics.py...", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 27212, "name": "MainProcess"}, "thread": {"id": 24288, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:15:43.147160+09:00", "timestamp": 1752930943.14716}}}
{"text": "RAGAs evaluation completed successfully within metrics.py.\n", "record": {"elapsed": {"repr": "0:02:19.504735", "seconds": 139.504735}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 34, "message": "RAGAs evaluation completed successfully within metrics.py.", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 27212, "name": "MainProcess"}, "thread": {"id": 24288, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:16:28.222638+09:00", "timestamp": 1752930988.222638}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:02:19.505072", "seconds": 139.505072}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 109, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 27212, "name": "MainProcess"}, "thread": {"id": 24288, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:16:28.222975+09:00", "timestamp": 1752930988.222975}}}
{"text": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>\n", "record": {"elapsed": {"repr": "0:02:19.505215", "seconds": 139.505215}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 110, "message": "Type of ragas_result: <class 'ragas.dataset_schema.EvaluationResult'>", "module": "run_evaluation", "name": "__main__", "process": {"id": 27212, "name": "MainProcess"}, "thread": {"id": 24288, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:16:28.223118+09:00", "timestamp": 1752930988.223118}}}
{"text": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']\n", "record": {"elapsed": {"repr": "0:02:19.505505", "seconds": 139.505505}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 111, "message": "Attributes of ragas_result: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__replace__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__weakref__', '_repr_dict', '_scores_dict', 'binary_columns', 'cost_cb', 'dataset', 'ragas_traces', 'run_id', 'scores', 'to_pandas', 'total_cost', 'total_tokens', 'traces', 'upload']", "module": "run_evaluation", "name": "__main__", "process": {"id": 27212, "name": "MainProcess"}, "thread": {"id": 24288, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:16:28.223408+09:00", "timestamp": 1752930988.223408}}}
{"text": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json\n", "record": {"elapsed": {"repr": "0:02:19.523277", "seconds": 139.523277}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 121, "message": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json", "module": "run_evaluation", "name": "__main__", "process": {"id": 27212, "name": "MainProcess"}, "thread": {"id": 24288, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:16:28.241180+09:00", "timestamp": 1752930988.24118}}}
{"text": "{\n  \"faithfulness\": 0.8148148148148148,\n  \"answer_relevancy\": 0.7760679842422288\n}\n", "record": {"elapsed": {"repr": "0:02:19.523853", "seconds": 139.523853}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 122, "message": "{\n  \"faithfulness\": 0.8148148148148148,\n  \"answer_relevancy\": 0.7760679842422288\n}", "module": "run_evaluation", "name": "__main__", "process": {"id": 27212, "name": "MainProcess"}, "thread": {"id": 24288, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:16:28.241756+09:00", "timestamp": 1752930988.241756}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:12.286183", "seconds": 12.286183}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 80, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 28548, "name": "MainProcess"}, "thread": {"id": 14804, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:21:14.370573+09:00", "timestamp": 1752931274.370573}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:12.287371", "seconds": 12.287371}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 28548, "name": "MainProcess"}, "thread": {"id": 14804, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:21:14.371761+09:00", "timestamp": 1752931274.371761}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 142, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000002CA2DB70AE0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 83, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          │                     └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          └ <function run_single_evaluation at 0x000002CA2DB1BBA0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                   └ <function execute_patent_search_workflow at 0x000002CA2DB1B7E0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                  │                    └ <function Pregel.invoke at 0x000002CA090A80E0>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x000002CA2DB25E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x000002CA09097F60>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x000002CA2DB25E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x000002CA09094E00>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x000002CA2E95A7B0>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x000002CA090945E0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch:to:summariz...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='summarize_selected_patents', input=AppState(chat_history=[], plan_text='This is a dummy plan text ...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='summarize_selected_patents', input=AppState(chat_history=[], plan_text='This is a dummy plan text ...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch:to:summariz...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n            │       │   │    └ <function RunnableCallable.invoke at 0x000002CA090579C0>\n            │       │   └ summarize_selected_patents(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x000002CA2E9BC3C0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 1...\n          │    └ <function summarize_selected_patents at 0x000002CA2DB1A020>\n          └ summarize_selected_patents(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 286, in summarize_selected_patents\n    state.summary_result = chain.invoke({\"patent_list\": patent_list_str, \"plan_text\": state.plan_text}).content\n    │     │                │     │                      │                             │     └ 'This is a dummy plan text for evaluation.'\n    │     │                │     │                      │                             └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n    │     │                │     │                      └ 'publication_number                                                                                                          ...\n    │     │                │     └ <function RunnableSequence.invoke at 0x000002CA0872F2E0>\n    │     │                └ ChatPromptTemplate(input_variables=['patent_list', 'plan_text'], input_types={}, partial_variables={}, messages=[HumanMessage...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content='あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複数の特許情報について、それぞれの要点をまとめ、元の質問（調査方針）に最...\n             │       │   │    └ <function BaseChatModel.invoke at 0x000002CA0BC52840>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002CA2D9DECF0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x000002CA2E9C9FC0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x000002CA0BC52FC0>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002CA2D9DECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x000002CA2D5F47D0>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content='あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複数の特許情報について、それぞれの要点をまとめ、元の質問（調査方針）に最も関連性の高い情報を強調しながら解説してください...\n           │    └ <function BaseChatModel.generate at 0x000002CA0BC52E80>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002CA2D9DECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x000002CA0BC53100>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002CA2D9DECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x000002CA080ED760>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002CA2D9DECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': 'あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複...\n               │    │      └ <function Completions.create at 0x000002CA2D77F2E0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x000002CA2D9DECF0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002CA2D9DECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': 'あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x000002CA2D9DECF0>,)\n           └ <function Completions.create at 0x000002CA2D77F1A0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x000002CA2D6B02F0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x000002CA2D9DECF0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x000002CA0BA787C0>\n           │    │          └ <openai.OpenAI object at 0x000002CA2D6B02F0>\n           │    └ ~ResponseT\n           └ <function cast at 0x000002CA7F931800>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x000002CA0BA6EF20>\n          └ <openai.OpenAI object at 0x000002CA2D6B02F0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 74915. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}\nDuring task with name 'summarize_selected_patents' and id 'db834c5a-eb7f-3ed9-5a8e-c36e3d1dbbbf'\n", "record": {"elapsed": {"repr": "0:00:36.000412", "seconds": 36.000412}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 74915. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 70, "message": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 28548, "name": "MainProcess"}, "thread": {"id": 14804, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:21:38.084802+09:00", "timestamp": 1752931298.084802}}}
{"text": "Running evaluation for query: water_filtration_membrane_002\n", "record": {"elapsed": {"repr": "0:00:36.252484", "seconds": 36.252484}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 28548, "name": "MainProcess"}, "thread": {"id": 14804, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:21:38.336874+09:00", "timestamp": 1752931298.336874}}}
{"text": "Running evaluation for query: autonomous_driving_sensor_fusion_003\n", "record": {"elapsed": {"repr": "0:01:05.828832", "seconds": 65.828832}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 28548, "name": "MainProcess"}, "thread": {"id": 14804, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:22:07.913222+09:00", "timestamp": 1752931327.913222}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:12.427028", "seconds": 12.427028}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 80, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 19204, "name": "MainProcess"}, "thread": {"id": 13088, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:50:01.271552+09:00", "timestamp": 1752933001.271552}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:12.427927", "seconds": 12.427927}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 19204, "name": "MainProcess"}, "thread": {"id": 13088, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:50:01.272451+09:00", "timestamp": 1752933001.272451}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 142, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000001488104CAE0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 83, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          │                     └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          └ <function run_single_evaluation at 0x0000014880FFBBA0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                   └ <function execute_patent_search_workflow at 0x0000014880FFB7E0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                  │                    └ <function Pregel.invoke at 0x00000148DC5380E0>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x0000014881005E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x00000148DC527F60>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x0000014881005E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x00000148DC524E00>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x0000014881DFA7B0>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x00000148DC5245E0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n            │       │   │    └ <function RunnableCallable.invoke at 0x00000148DC4E79C0>\n            │       │   └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x0000014881E5C5C0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 1...\n          │    └ <function generate_sql_and_explanation at 0x00000148FFFFC2C0>\n          └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 186, in generate_sql_and_explanation\n    state.sql_explanation = chain_sql_explain.invoke({\"sql\": sql}).content\n    │     │                 │                 │              └ \"\\nWITH localized_patents AS (\\n  SELECT\\n    p.publication_number,\\n    (SELECT text FROM UNNEST(p.title_localized)    WHERE...\n    │     │                 │                 └ <function RunnableSequence.invoke at 0x00000148DBB832E0>\n    │     │                 └ ChatPromptTemplate(input_variables=['sql'], input_types={}, partial_variables={}, messages=[HumanMessagePromptTemplate(prompt...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_pat...\n             │       │   │    └ <function BaseChatModel.invoke at 0x00000148DF132840>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x0000014881E6A280>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x00000148DF132FC0>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x0000014881E577D0>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_patents AS (\\n  SELECT\\n   ...\n           │    └ <function BaseChatModel.generate at 0x00000148DF132E80>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x00000148DF133100>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x00000148DB54D760>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n               │    │      └ <function Completions.create at 0x00000148FFC932E0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>,)\n           └ <function Completions.create at 0x00000148FFC931A0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x00000148FFBC02F0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x00000148DEF587C0>\n           │    │          └ <openai.OpenAI object at 0x00000148FFBC02F0>\n           │    └ ~ResponseT\n           └ <function cast at 0x00000148D6D9D800>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x00000148DEF4EF20>\n          └ <openai.OpenAI object at 0x00000148FFBC02F0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nDuring task with name 'generate_sql_and_explanation' and id '45f95e90-d423-6689-7d7d-1710a1306b1f'\n", "record": {"elapsed": {"repr": "0:00:14.774702", "seconds": 14.774702}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 70, "message": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 19204, "name": "MainProcess"}, "thread": {"id": 13088, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:50:03.619226+09:00", "timestamp": 1752933003.619226}}}
{"text": "Running evaluation for query: water_filtration_membrane_002\n", "record": {"elapsed": {"repr": "0:00:14.791888", "seconds": 14.791888}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 19204, "name": "MainProcess"}, "thread": {"id": 13088, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:50:03.636412+09:00", "timestamp": 1752933003.636412}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for water_filtration_membrane_002\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 142, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000001488104CAE0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 83, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'water_filtration_membrane_002', 'question': '水ろ過膜技術に関する特許を検索してください。特に逆浸透膜に焦点を当ててください。', 'search_query': {'ipc_c...\n                          │                     └ {'query_id': 'water_filtration_membrane_002', 'question': '水ろ過膜技術に関する特許を検索してください。特に逆浸透膜に焦点を当ててください。', 'search_query': {'ipc_c...\n                          └ <function run_single_evaluation at 0x0000014880FFBBA0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 61...\n                   └ <function execute_patent_search_workflow at 0x0000014880FFB7E0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 61...\n                  │                    └ <function Pregel.invoke at 0x00000148DC5380E0>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x0000014881005E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x00000148DC527F60>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x0000014881005E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x00000148DC524E00>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x0000014881F75E50>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x00000148DC5245E0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 61...\n            │       │   │    └ <function RunnableCallable.invoke at 0x00000148DC4E79C0>\n            │       │   └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x0000014881E69700>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 6...\n          │    └ <function generate_sql_and_explanation at 0x00000148FFFFC2C0>\n          └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 186, in generate_sql_and_explanation\n    state.sql_explanation = chain_sql_explain.invoke({\"sql\": sql}).content\n    │     │                 │                 │              └ \"\\nWITH localized_patents AS (\\n  SELECT\\n    p.publication_number,\\n    (SELECT text FROM UNNEST(p.title_localized)    WHERE...\n    │     │                 │                 └ <function RunnableSequence.invoke at 0x00000148DBB832E0>\n    │     │                 └ ChatPromptTemplate(input_variables=['sql'], input_types={}, partial_variables={}, messages=[HumanMessagePromptTemplate(prompt...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 61...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_pat...\n             │       │   │    └ <function BaseChatModel.invoke at 0x00000148DF132840>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x000001488204F000>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x00000148DF132FC0>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x0000014882054B50>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_patents AS (\\n  SELECT\\n   ...\n           │    └ <function BaseChatModel.generate at 0x00000148DF132E80>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x00000148DF133100>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x00000148DB54D760>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n               │    │      └ <function Completions.create at 0x00000148FFC932E0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>,)\n           └ <function Completions.create at 0x00000148FFC931A0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x00000148FFBC02F0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x00000148DEF587C0>\n           │    │          └ <openai.OpenAI object at 0x00000148FFBC02F0>\n           │    └ ~ResponseT\n           └ <function cast at 0x00000148D6D9D800>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x00000148DEF4EF20>\n          └ <openai.OpenAI object at 0x00000148FFBC02F0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nDuring task with name 'generate_sql_and_explanation' and id '533d441e-60f5-8d04-9c72-1d08098e1e7c'\n", "record": {"elapsed": {"repr": "0:00:16.925106", "seconds": 16.925106}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 70, "message": "  [FATAL] An unexpected exception occurred in workflow execution for water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 19204, "name": "MainProcess"}, "thread": {"id": 13088, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:50:05.769630+09:00", "timestamp": 1752933005.76963}}}
{"text": "Running evaluation for query: autonomous_driving_sensor_fusion_003\n", "record": {"elapsed": {"repr": "0:00:16.930472", "seconds": 16.930472}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 19204, "name": "MainProcess"}, "thread": {"id": 13088, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:50:05.774996+09:00", "timestamp": 1752933005.774996}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for autonomous_driving_sensor_fusion_003\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 142, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000001488104CAE0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 83, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'autonomous_driving_sensor_fusion_003', 'question': '自動運転におけるセンサーフュージョン技術の特許を調べてください。カメラとLiDARの組み合わせに興味があります。', ...\n                          │                     └ {'query_id': 'autonomous_driving_sensor_fusion_003', 'question': '自動運転におけるセンサーフュージョン技術の特許を調べてください。カメラとLiDARの組み合わせに興味があります。', ...\n                          └ <function run_single_evaluation at 0x0000014880FFBBA0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n                   └ <function execute_patent_search_workflow at 0x0000014880FFB7E0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n                  │                    └ <function Pregel.invoke at 0x00000148DC5380E0>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x0000014881005E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x00000148DC527F60>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x0000014881005E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x00000148DC524E00>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x0000014881F76C10>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x00000148DC5245E0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n            │       │   │    └ <function RunnableCallable.invoke at 0x00000148DC4E79C0>\n            │       │   └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x000001488204EAC0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1...\n          │    └ <function generate_sql_and_explanation at 0x00000148FFFFC2C0>\n          └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 186, in generate_sql_and_explanation\n    state.sql_explanation = chain_sql_explain.invoke({\"sql\": sql}).content\n    │     │                 │                 │              └ \"\\nWITH localized_patents AS (\\n  SELECT\\n    p.publication_number,\\n    (SELECT text FROM UNNEST(p.title_localized)    WHERE...\n    │     │                 │                 └ <function RunnableSequence.invoke at 0x00000148DBB832E0>\n    │     │                 └ ChatPromptTemplate(input_variables=['sql'], input_types={}, partial_variables={}, messages=[HumanMessagePromptTemplate(prompt...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_pat...\n             │       │   │    └ <function BaseChatModel.invoke at 0x00000148DF132840>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x0000014882067440>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x00000148DF132FC0>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x00000148820574D0>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_patents AS (\\n  SELECT\\n   ...\n           │    └ <function BaseChatModel.generate at 0x00000148DF132E80>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x00000148DF133100>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x00000148DB54D760>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n               │    │      └ <function Completions.create at 0x00000148FFC932E0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>,)\n           └ <function Completions.create at 0x00000148FFC931A0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x00000148FFBC02F0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x00000148FFEEECF0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x00000148DEF587C0>\n           │    │          └ <openai.OpenAI object at 0x00000148FFBC02F0>\n           │    └ ~ResponseT\n           └ <function cast at 0x00000148D6D9D800>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x00000148DEF4EF20>\n          └ <openai.OpenAI object at 0x00000148FFBC02F0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nDuring task with name 'generate_sql_and_explanation' and id '3d5f79ca-66af-a4e7-609a-079254b14f2b'\n", "record": {"elapsed": {"repr": "0:00:19.075176", "seconds": 19.075176}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 70, "message": "  [FATAL] An unexpected exception occurred in workflow execution for autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 19204, "name": "MainProcess"}, "thread": {"id": 13088, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:50:07.919700+09:00", "timestamp": 1752933007.9197}}}
{"text": "Skipping RAGAs evaluation for image_recognition_ai_001 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n", "record": {"elapsed": {"repr": "0:00:19.080703", "seconds": 19.080703}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 88, "message": "Skipping RAGAs evaluation for image_recognition_ai_001 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 19204, "name": "MainProcess"}, "thread": {"id": 13088, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:50:07.925227+09:00", "timestamp": 1752933007.925227}}}
{"text": "Skipping RAGAs evaluation for water_filtration_membrane_002 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n", "record": {"elapsed": {"repr": "0:00:19.080868", "seconds": 19.080868}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 88, "message": "Skipping RAGAs evaluation for water_filtration_membrane_002 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 19204, "name": "MainProcess"}, "thread": {"id": 13088, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:50:07.925392+09:00", "timestamp": 1752933007.925392}}}
{"text": "Skipping RAGAs evaluation for autonomous_driving_sensor_fusion_003 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n", "record": {"elapsed": {"repr": "0:00:19.081001", "seconds": 19.081001}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 88, "message": "Skipping RAGAs evaluation for autonomous_driving_sensor_fusion_003 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 19204, "name": "MainProcess"}, "thread": {"id": 13088, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:50:07.925525+09:00", "timestamp": 1752933007.925525}}}
{"text": "An unexpected error occurred in main\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 142, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000001488104CAE0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 119, in main\n    json.dump(report, f, indent=2, ensure_ascii=False)\n    │    │            └ <_io.TextIOWrapper name='C:\\\\Users\\\\atsuk\\\\OneDrive\\\\ドキュメント\\\\GeminiCLI\\\\2507 PatentsFinder3.0\\\\reports\\\\metrics_report.json' ...\n    │    └ <function dump at 0x00000148B8650680>\n    └ <module 'json' from 'C:\\\\Python313\\\\Lib\\\\json\\\\__init__.py'>\n\nUnboundLocalError: cannot access local variable 'report' where it is not associated with a value\n", "record": {"elapsed": {"repr": "0:00:19.095248", "seconds": 19.095248}, "exception": {"type": "UnboundLocalError", "value": "cannot access local variable 'report' where it is not associated with a value", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 124, "message": "An unexpected error occurred in main", "module": "run_evaluation", "name": "__main__", "process": {"id": 19204, "name": "MainProcess"}, "thread": {"id": 13088, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:50:07.939772+09:00", "timestamp": 1752933007.939772}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:12.117734", "seconds": 12.117734}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 80, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 20556, "name": "MainProcess"}, "thread": {"id": 18948, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:52:14.811342+09:00", "timestamp": 1752933134.811342}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:12.118716", "seconds": 12.118716}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 20556, "name": "MainProcess"}, "thread": {"id": 18948, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:52:14.812324+09:00", "timestamp": 1752933134.812324}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 159, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000001B76C29CAE0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 83, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          │                     └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          └ <function run_single_evaluation at 0x000001B76C24BBA0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                   └ <function execute_patent_search_workflow at 0x000001B76C24B7E0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                  │                    └ <function Pregel.invoke at 0x000001B7477180E0>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x000001B76C255E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x000001B74770BF60>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x000001B76C255E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x000001B747708E00>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x000001B76DFA67B0>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x000001B7477085E0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n            │       │   │    └ <function RunnableCallable.invoke at 0x000001B7476C79C0>\n            │       │   └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x000001B76E008F40>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 1...\n          │    └ <function generate_sql_and_explanation at 0x000001B76C21C2C0>\n          └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 186, in generate_sql_and_explanation\n    state.sql_explanation = chain_sql_explain.invoke({\"sql\": sql}).content\n    │     │                 │                 │              └ \"\\nWITH localized_patents AS (\\n  SELECT\\n    p.publication_number,\\n    (SELECT text FROM UNNEST(p.title_localized)    WHERE...\n    │     │                 │                 └ <function RunnableSequence.invoke at 0x000001B746D672E0>\n    │     │                 └ ChatPromptTemplate(input_variables=['sql'], input_types={}, partial_variables={}, messages=[HumanMessagePromptTemplate(prompt...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_pat...\n             │       │   │    └ <function BaseChatModel.invoke at 0x000001B74A372840>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x000001B76E01ACC0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x000001B74A372FC0>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x000001B76E0077D0>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_patents AS (\\n  SELECT\\n   ...\n           │    └ <function BaseChatModel.generate at 0x000001B74A372E80>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x000001B74A373100>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x000001B74671D760>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n               │    │      └ <function Completions.create at 0x000001B76BEB32E0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>,)\n           └ <function Completions.create at 0x000001B76BEB31A0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x000001B76BDE02F0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x000001B74A1987C0>\n           │    │          └ <openai.OpenAI object at 0x000001B76BDE02F0>\n           │    └ ~ResponseT\n           └ <function cast at 0x000001B741F31800>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x000001B74A18EF20>\n          └ <openai.OpenAI object at 0x000001B76BDE02F0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nDuring task with name 'generate_sql_and_explanation' and id '3f3c85e3-a45e-6bf4-6299-6a540f5e5208'\n", "record": {"elapsed": {"repr": "0:00:14.767564", "seconds": 14.767564}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 70, "message": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 20556, "name": "MainProcess"}, "thread": {"id": 18948, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:52:17.461172+09:00", "timestamp": 1752933137.461172}}}
{"text": "Running evaluation for query: water_filtration_membrane_002\n", "record": {"elapsed": {"repr": "0:00:14.783932", "seconds": 14.783932}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 20556, "name": "MainProcess"}, "thread": {"id": 18948, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:52:17.477540+09:00", "timestamp": 1752933137.47754}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for water_filtration_membrane_002\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 159, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000001B76C29CAE0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 83, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'water_filtration_membrane_002', 'question': '水ろ過膜技術に関する特許を検索してください。特に逆浸透膜に焦点を当ててください。', 'search_query': {'ipc_c...\n                          │                     └ {'query_id': 'water_filtration_membrane_002', 'question': '水ろ過膜技術に関する特許を検索してください。特に逆浸透膜に焦点を当ててください。', 'search_query': {'ipc_c...\n                          └ <function run_single_evaluation at 0x000001B76C24BBA0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 61...\n                   └ <function execute_patent_search_workflow at 0x000001B76C24B7E0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 61...\n                  │                    └ <function Pregel.invoke at 0x000001B7477180E0>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x000001B76C255E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x000001B74770BF60>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x000001B76C255E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x000001B747708E00>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x000001B76E125E50>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x000001B7477085E0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 61...\n            │       │   │    └ <function RunnableCallable.invoke at 0x000001B7476C79C0>\n            │       │   └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x000001B76E01A1C0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 6...\n          │    └ <function generate_sql_and_explanation at 0x000001B76C21C2C0>\n          └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 186, in generate_sql_and_explanation\n    state.sql_explanation = chain_sql_explain.invoke({\"sql\": sql}).content\n    │     │                 │                 │              └ \"\\nWITH localized_patents AS (\\n  SELECT\\n    p.publication_number,\\n    (SELECT text FROM UNNEST(p.title_localized)    WHERE...\n    │     │                 │                 └ <function RunnableSequence.invoke at 0x000001B746D672E0>\n    │     │                 └ ChatPromptTemplate(input_variables=['sql'], input_types={}, partial_variables={}, messages=[HumanMessagePromptTemplate(prompt...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 61...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_pat...\n             │       │   │    └ <function BaseChatModel.invoke at 0x000001B74A372840>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x000001B76E1FF3C0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x000001B74A372FC0>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x000001B76E20CC50>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_patents AS (\\n  SELECT\\n   ...\n           │    └ <function BaseChatModel.generate at 0x000001B74A372E80>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x000001B74A373100>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x000001B74671D760>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n               │    │      └ <function Completions.create at 0x000001B76BEB32E0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>,)\n           └ <function Completions.create at 0x000001B76BEB31A0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x000001B76BDE02F0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x000001B74A1987C0>\n           │    │          └ <openai.OpenAI object at 0x000001B76BDE02F0>\n           │    └ ~ResponseT\n           └ <function cast at 0x000001B741F31800>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x000001B74A18EF20>\n          └ <openai.OpenAI object at 0x000001B76BDE02F0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nDuring task with name 'generate_sql_and_explanation' and id 'd6762df8-fcc4-09a6-2f28-e08e5b199d5f'\n", "record": {"elapsed": {"repr": "0:00:16.916843", "seconds": 16.916843}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 70, "message": "  [FATAL] An unexpected exception occurred in workflow execution for water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 20556, "name": "MainProcess"}, "thread": {"id": 18948, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:52:19.610451+09:00", "timestamp": 1752933139.610451}}}
{"text": "Running evaluation for query: autonomous_driving_sensor_fusion_003\n", "record": {"elapsed": {"repr": "0:00:16.924516", "seconds": 16.924516}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 20556, "name": "MainProcess"}, "thread": {"id": 18948, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:52:19.618124+09:00", "timestamp": 1752933139.618124}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for autonomous_driving_sensor_fusion_003\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 159, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000001B76C29CAE0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 83, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'autonomous_driving_sensor_fusion_003', 'question': '自動運転におけるセンサーフュージョン技術の特許を調べてください。カメラとLiDARの組み合わせに興味があります。', ...\n                          │                     └ {'query_id': 'autonomous_driving_sensor_fusion_003', 'question': '自動運転におけるセンサーフュージョン技術の特許を調べてください。カメラとLiDARの組み合わせに興味があります。', ...\n                          └ <function run_single_evaluation at 0x000001B76C24BBA0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n                   └ <function execute_patent_search_workflow at 0x000001B76C24B7E0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n                  │                    └ <function Pregel.invoke at 0x000001B7477180E0>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x000001B76C255E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x000001B74770BF60>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x000001B76C255E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x000001B747708E00>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x000001B76E126C10>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x000001B7477085E0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n            │       │   │    └ <function RunnableCallable.invoke at 0x000001B7476C79C0>\n            │       │   └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x000001B76E1FEE80>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1...\n          │    └ <function generate_sql_and_explanation at 0x000001B76C21C2C0>\n          └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 186, in generate_sql_and_explanation\n    state.sql_explanation = chain_sql_explain.invoke({\"sql\": sql}).content\n    │     │                 │                 │              └ \"\\nWITH localized_patents AS (\\n  SELECT\\n    p.publication_number,\\n    (SELECT text FROM UNNEST(p.title_localized)    WHERE...\n    │     │                 │                 └ <function RunnableSequence.invoke at 0x000001B746D672E0>\n    │     │                 └ ChatPromptTemplate(input_variables=['sql'], input_types={}, partial_variables={}, messages=[HumanMessagePromptTemplate(prompt...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_pat...\n             │       │   │    └ <function BaseChatModel.invoke at 0x000001B74A372840>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x000001B76E21FA40>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x000001B74A372FC0>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x000001B76E20F5D0>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_patents AS (\\n  SELECT\\n   ...\n           │    └ <function BaseChatModel.generate at 0x000001B74A372E80>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x000001B74A373100>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x000001B74671D760>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n               │    │      └ <function Completions.create at 0x000001B76BEB32E0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>,)\n           └ <function Completions.create at 0x000001B76BEB31A0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x000001B76BDE02F0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x000001B76C10ECF0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x000001B74A1987C0>\n           │    │          └ <openai.OpenAI object at 0x000001B76BDE02F0>\n           │    └ ~ResponseT\n           └ <function cast at 0x000001B741F31800>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x000001B74A18EF20>\n          └ <openai.OpenAI object at 0x000001B76BDE02F0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nDuring task with name 'generate_sql_and_explanation' and id 'e854aacd-93ee-9d7d-f6ed-84c2ce966de4'\n", "record": {"elapsed": {"repr": "0:00:19.449307", "seconds": 19.449307}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 70, "message": "  [FATAL] An unexpected exception occurred in workflow execution for autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 20556, "name": "MainProcess"}, "thread": {"id": 18948, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:52:22.142915+09:00", "timestamp": 1752933142.142915}}}
{"text": "Skipping RAGAs evaluation for image_recognition_ai_001 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n", "record": {"elapsed": {"repr": "0:00:19.455332", "seconds": 19.455332}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 88, "message": "Skipping RAGAs evaluation for image_recognition_ai_001 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 20556, "name": "MainProcess"}, "thread": {"id": 18948, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:52:22.148940+09:00", "timestamp": 1752933142.14894}}}
{"text": "Skipping RAGAs evaluation for water_filtration_membrane_002 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n", "record": {"elapsed": {"repr": "0:00:19.455533", "seconds": 19.455533}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 88, "message": "Skipping RAGAs evaluation for water_filtration_membrane_002 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 20556, "name": "MainProcess"}, "thread": {"id": 18948, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:52:22.149141+09:00", "timestamp": 1752933142.149141}}}
{"text": "Skipping RAGAs evaluation for autonomous_driving_sensor_fusion_003 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n", "record": {"elapsed": {"repr": "0:00:19.455696", "seconds": 19.455696}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 88, "message": "Skipping RAGAs evaluation for autonomous_driving_sensor_fusion_003 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 20556, "name": "MainProcess"}, "thread": {"id": 18948, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:52:22.149304+09:00", "timestamp": 1752933142.149304}}}
{"text": "No valid results to evaluate with RAGAs.\n", "record": {"elapsed": {"repr": "0:00:19.455828", "seconds": 19.455828}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 128, "message": "No valid results to evaluate with RAGAs.", "module": "run_evaluation", "name": "__main__", "process": {"id": 20556, "name": "MainProcess"}, "thread": {"id": 18948, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:52:22.149436+09:00", "timestamp": 1752933142.149436}}}
{"text": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json\n", "record": {"elapsed": {"repr": "0:00:19.457596", "seconds": 19.457596}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 138, "message": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json", "module": "run_evaluation", "name": "__main__", "process": {"id": 20556, "name": "MainProcess"}, "thread": {"id": 18948, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:52:22.151204+09:00", "timestamp": 1752933142.151204}}}
{"text": "{\n  \"status\": \"No evaluation performed.\"\n}\n", "record": {"elapsed": {"repr": "0:00:19.457775", "seconds": 19.457775}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 139, "message": "{\n  \"status\": \"No evaluation performed.\"\n}", "module": "run_evaluation", "name": "__main__", "process": {"id": 20556, "name": "MainProcess"}, "thread": {"id": 18948, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:52:22.151383+09:00", "timestamp": 1752933142.151383}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:11.928515", "seconds": 11.928515}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 80, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 2880, "name": "MainProcess"}, "thread": {"id": 2464, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:53:05.209547+09:00", "timestamp": 1752933185.209547}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:11.929543", "seconds": 11.929543}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 2880, "name": "MainProcess"}, "thread": {"id": 2464, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:53:05.210575+09:00", "timestamp": 1752933185.210575}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 155, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000002A3FF52CAE0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 83, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          │                     └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          └ <function run_single_evaluation at 0x000002A3FF4DBBA0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                   └ <function execute_patent_search_workflow at 0x000002A3FF4DB7E0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                  │                    └ <function Pregel.invoke at 0x000002A3DAA580E0>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x000002A3FF4E5E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x000002A3DAA47F60>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x000002A3FF4E5E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x000002A3DAA44E00>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x000002A3803367B0>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x000002A3DAA445E0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n            │       │   │    └ <function RunnableCallable.invoke at 0x000002A3DAA079C0>\n            │       │   └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x000002A38039C740>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 1...\n          │    └ <function generate_sql_and_explanation at 0x000002A3FF4AC2C0>\n          └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 186, in generate_sql_and_explanation\n    state.sql_explanation = chain_sql_explain.invoke({\"sql\": sql}).content\n    │     │                 │                 │              └ \"\\nWITH localized_patents AS (\\n  SELECT\\n    p.publication_number,\\n    (SELECT text FROM UNNEST(p.title_localized)    WHERE...\n    │     │                 │                 └ <function RunnableSequence.invoke at 0x000002A3DA0A32E0>\n    │     │                 └ ChatPromptTemplate(input_variables=['sql'], input_types={}, partial_variables={}, messages=[HumanMessagePromptTemplate(prompt...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_pat...\n             │       │   │    └ <function BaseChatModel.invoke at 0x000002A3DD602840>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x000002A3803AA480>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x000002A3DD602FC0>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x000002A3803977D0>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_patents AS (\\n  SELECT\\n   ...\n           │    └ <function BaseChatModel.generate at 0x000002A3DD602E80>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x000002A3DD603100>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x000002A3D9A6D760>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n               │    │      └ <function Completions.create at 0x000002A3FF13F2E0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>,)\n           └ <function Completions.create at 0x000002A3FF13F1A0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x000002A3FF0742F0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x000002A3DD4287C0>\n           │    │          └ <openai.OpenAI object at 0x000002A3FF0742F0>\n           │    └ ~ResponseT\n           └ <function cast at 0x000002A3D525D800>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x000002A3DD41EF20>\n          └ <openai.OpenAI object at 0x000002A3FF0742F0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nDuring task with name 'generate_sql_and_explanation' and id '36c3855b-e111-f6c7-16b1-517759341255'\n", "record": {"elapsed": {"repr": "0:00:14.152123", "seconds": 14.152123}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 70, "message": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 2880, "name": "MainProcess"}, "thread": {"id": 2464, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:53:07.433155+09:00", "timestamp": 1752933187.433155}}}
{"text": "Running evaluation for query: water_filtration_membrane_002\n", "record": {"elapsed": {"repr": "0:00:14.168314", "seconds": 14.168314}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 2880, "name": "MainProcess"}, "thread": {"id": 2464, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:53:07.449346+09:00", "timestamp": 1752933187.449346}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for water_filtration_membrane_002\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 155, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000002A3FF52CAE0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 83, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'water_filtration_membrane_002', 'question': '水ろ過膜技術に関する特許を検索してください。特に逆浸透膜に焦点を当ててください。', 'search_query': {'ipc_c...\n                          │                     └ {'query_id': 'water_filtration_membrane_002', 'question': '水ろ過膜技術に関する特許を検索してください。特に逆浸透膜に焦点を当ててください。', 'search_query': {'ipc_c...\n                          └ <function run_single_evaluation at 0x000002A3FF4DBBA0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 61...\n                   └ <function execute_patent_search_workflow at 0x000002A3FF4DB7E0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 61...\n                  │                    └ <function Pregel.invoke at 0x000002A3DAA580E0>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x000002A3FF4E5E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x000002A3DAA47F60>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x000002A3FF4E5E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x000002A3DAA44E00>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x000002A3804B5E50>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x000002A3DAA445E0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 61...\n            │       │   │    └ <function RunnableCallable.invoke at 0x000002A3DAA079C0>\n            │       │   └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x000002A3802EC840>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 6...\n          │    └ <function generate_sql_and_explanation at 0x000002A3FF4AC2C0>\n          └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 186, in generate_sql_and_explanation\n    state.sql_explanation = chain_sql_explain.invoke({\"sql\": sql}).content\n    │     │                 │                 │              └ \"\\nWITH localized_patents AS (\\n  SELECT\\n    p.publication_number,\\n    (SELECT text FROM UNNEST(p.title_localized)    WHERE...\n    │     │                 │                 └ <function RunnableSequence.invoke at 0x000002A3DA0A32E0>\n    │     │                 └ ChatPromptTemplate(input_variables=['sql'], input_types={}, partial_variables={}, messages=[HumanMessagePromptTemplate(prompt...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 61...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_pat...\n             │       │   │    └ <function BaseChatModel.invoke at 0x000002A3DD602840>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x000002A38058EF40>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x000002A3DD602FC0>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x000002A3804D8CD0>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_patents AS (\\n  SELECT\\n   ...\n           │    └ <function BaseChatModel.generate at 0x000002A3DD602E80>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x000002A3DD603100>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x000002A3D9A6D760>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n               │    │      └ <function Completions.create at 0x000002A3FF13F2E0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>,)\n           └ <function Completions.create at 0x000002A3FF13F1A0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x000002A3FF0742F0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x000002A3DD4287C0>\n           │    │          └ <openai.OpenAI object at 0x000002A3FF0742F0>\n           │    └ ~ResponseT\n           └ <function cast at 0x000002A3D525D800>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x000002A3DD41EF20>\n          └ <openai.OpenAI object at 0x000002A3FF0742F0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nDuring task with name 'generate_sql_and_explanation' and id '012cd00e-6d33-e60e-1f4c-7fc5a22db091'\n", "record": {"elapsed": {"repr": "0:00:16.200793", "seconds": 16.200793}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 70, "message": "  [FATAL] An unexpected exception occurred in workflow execution for water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 2880, "name": "MainProcess"}, "thread": {"id": 2464, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:53:09.481825+09:00", "timestamp": 1752933189.481825}}}
{"text": "Running evaluation for query: autonomous_driving_sensor_fusion_003\n", "record": {"elapsed": {"repr": "0:00:16.206412", "seconds": 16.206412}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 2880, "name": "MainProcess"}, "thread": {"id": 2464, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:53:09.487444+09:00", "timestamp": 1752933189.487444}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for autonomous_driving_sensor_fusion_003\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 155, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000002A3FF52CAE0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 83, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'autonomous_driving_sensor_fusion_003', 'question': '自動運転におけるセンサーフュージョン技術の特許を調べてください。カメラとLiDARの組み合わせに興味があります。', ...\n                          │                     └ {'query_id': 'autonomous_driving_sensor_fusion_003', 'question': '自動運転におけるセンサーフュージョン技術の特許を調べてください。カメラとLiDARの組み合わせに興味があります。', ...\n                          └ <function run_single_evaluation at 0x000002A3FF4DBBA0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n                   └ <function execute_patent_search_workflow at 0x000002A3FF4DB7E0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n                  │                    └ <function Pregel.invoke at 0x000002A3DAA580E0>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x000002A3FF4E5E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x000002A3DAA47F60>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x000002A3FF4E5E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x000002A3DAA44E00>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x000002A3804B6C10>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x000002A3DAA445E0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n            │       │   │    └ <function RunnableCallable.invoke at 0x000002A3DAA079C0>\n            │       │   └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x000002A38058EA00>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1...\n          │    └ <function generate_sql_and_explanation at 0x000002A3FF4AC2C0>\n          └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 186, in generate_sql_and_explanation\n    state.sql_explanation = chain_sql_explain.invoke({\"sql\": sql}).content\n    │     │                 │                 │              └ \"\\nWITH localized_patents AS (\\n  SELECT\\n    p.publication_number,\\n    (SELECT text FROM UNNEST(p.title_localized)    WHERE...\n    │     │                 │                 └ <function RunnableSequence.invoke at 0x000002A3DA0A32E0>\n    │     │                 └ ChatPromptTemplate(input_variables=['sql'], input_types={}, partial_variables={}, messages=[HumanMessagePromptTemplate(prompt...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_pat...\n             │       │   │    └ <function BaseChatModel.invoke at 0x000002A3DD602840>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x000002A3805A73C0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x000002A3DD602FC0>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x000002A3804DB650>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_patents AS (\\n  SELECT\\n   ...\n           │    └ <function BaseChatModel.generate at 0x000002A3DD602E80>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x000002A3DD603100>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x000002A3D9A6D760>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n               │    │      └ <function Completions.create at 0x000002A3FF13F2E0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>,)\n           └ <function Completions.create at 0x000002A3FF13F1A0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x000002A3FF0742F0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x000002A3FF39ECF0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x000002A3DD4287C0>\n           │    │          └ <openai.OpenAI object at 0x000002A3FF0742F0>\n           │    └ ~ResponseT\n           └ <function cast at 0x000002A3D525D800>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x000002A3DD41EF20>\n          └ <openai.OpenAI object at 0x000002A3FF0742F0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nDuring task with name 'generate_sql_and_explanation' and id 'cfa2c6c5-c681-6328-c50c-6c8df9a44434'\n", "record": {"elapsed": {"repr": "0:00:18.249552", "seconds": 18.249552}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 70, "message": "  [FATAL] An unexpected exception occurred in workflow execution for autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 2880, "name": "MainProcess"}, "thread": {"id": 2464, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:53:11.530584+09:00", "timestamp": 1752933191.530584}}}
{"text": "Skipping RAGAs evaluation for image_recognition_ai_001 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n", "record": {"elapsed": {"repr": "0:00:18.256848", "seconds": 18.256848}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 88, "message": "Skipping RAGAs evaluation for image_recognition_ai_001 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 2880, "name": "MainProcess"}, "thread": {"id": 2464, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:53:11.537880+09:00", "timestamp": 1752933191.53788}}}
{"text": "Skipping RAGAs evaluation for water_filtration_membrane_002 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n", "record": {"elapsed": {"repr": "0:00:18.257082", "seconds": 18.257082}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 88, "message": "Skipping RAGAs evaluation for water_filtration_membrane_002 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 2880, "name": "MainProcess"}, "thread": {"id": 2464, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:53:11.538114+09:00", "timestamp": 1752933191.538114}}}
{"text": "Skipping RAGAs evaluation for autonomous_driving_sensor_fusion_003 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n", "record": {"elapsed": {"repr": "0:00:18.257231", "seconds": 18.257231}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 88, "message": "Skipping RAGAs evaluation for autonomous_driving_sensor_fusion_003 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 2880, "name": "MainProcess"}, "thread": {"id": 2464, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:53:11.538263+09:00", "timestamp": 1752933191.538263}}}
{"text": "No valid results to evaluate with RAGAs.\n", "record": {"elapsed": {"repr": "0:00:18.257362", "seconds": 18.257362}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 124, "message": "No valid results to evaluate with RAGAs.", "module": "run_evaluation", "name": "__main__", "process": {"id": 2880, "name": "MainProcess"}, "thread": {"id": 2464, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:53:11.538394+09:00", "timestamp": 1752933191.538394}}}
{"text": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json\n", "record": {"elapsed": {"repr": "0:00:18.259346", "seconds": 18.259346}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 134, "message": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json", "module": "run_evaluation", "name": "__main__", "process": {"id": 2880, "name": "MainProcess"}, "thread": {"id": 2464, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:53:11.540378+09:00", "timestamp": 1752933191.540378}}}
{"text": "{\n  \"status\": \"No evaluation performed.\"\n}\n", "record": {"elapsed": {"repr": "0:00:18.259827", "seconds": 18.259827}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 135, "message": "{\n  \"status\": \"No evaluation performed.\"\n}", "module": "run_evaluation", "name": "__main__", "process": {"id": 2880, "name": "MainProcess"}, "thread": {"id": 2464, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:53:11.540859+09:00", "timestamp": 1752933191.540859}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:12.260420", "seconds": 12.26042}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 83, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 24456, "name": "MainProcess"}, "thread": {"id": 12744, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:53:55.065448+09:00", "timestamp": 1752933235.065448}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:12.261530", "seconds": 12.26153}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 24456, "name": "MainProcess"}, "thread": {"id": 12744, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:53:55.066558+09:00", "timestamp": 1752933235.066558}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 158, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x0000027FB53D0AE0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 86, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          │                     └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          └ <function run_single_evaluation at 0x0000027FB537BBA0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                   └ <function execute_patent_search_workflow at 0x0000027FB537B7E0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                  │                    └ <function Pregel.invoke at 0x0000027F908A80E0>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x0000027FB5385E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x0000027F90897F60>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x0000027FB5385E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x0000027F90894E00>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x0000027FB617A7B0>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x0000027F908945E0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n            │       │   │    └ <function RunnableCallable.invoke at 0x0000027F908579C0>\n            │       │   └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x0000027FB61DC840>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 1...\n          │    └ <function generate_sql_and_explanation at 0x0000027FB534C2C0>\n          └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 186, in generate_sql_and_explanation\n    state.sql_explanation = chain_sql_explain.invoke({\"sql\": sql}).content\n    │     │                 │                 │              └ \"\\nWITH localized_patents AS (\\n  SELECT\\n    p.publication_number,\\n    (SELECT text FROM UNNEST(p.title_localized)    WHERE...\n    │     │                 │                 └ <function RunnableSequence.invoke at 0x0000027F8FF232E0>\n    │     │                 └ ChatPromptTemplate(input_variables=['sql'], input_types={}, partial_variables={}, messages=[HumanMessagePromptTemplate(prompt...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_pat...\n             │       │   │    └ <function BaseChatModel.invoke at 0x0000027F934A2840>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x0000027FB61EA380>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x0000027F934A2FC0>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x0000027FB61D7850>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_patents AS (\\n  SELECT\\n   ...\n           │    └ <function BaseChatModel.generate at 0x0000027F934A2E80>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x0000027F934A3100>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x0000027F8F8ED760>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n               │    │      └ <function Completions.create at 0x0000027FB4FDF2E0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>,)\n           └ <function Completions.create at 0x0000027FB4FDF1A0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x0000027FB4F102F0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x0000027F932C87C0>\n           │    │          └ <openai.OpenAI object at 0x0000027FB4F102F0>\n           │    └ ~ResponseT\n           └ <function cast at 0x0000027FFF09D800>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x0000027F932BEF20>\n          └ <openai.OpenAI object at 0x0000027FB4F102F0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nDuring task with name 'generate_sql_and_explanation' and id 'b8563f68-df90-57c6-2778-f36628780ec0'\n", "record": {"elapsed": {"repr": "0:00:14.396132", "seconds": 14.396132}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 73, "message": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 24456, "name": "MainProcess"}, "thread": {"id": 12744, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:53:57.201160+09:00", "timestamp": 1752933237.20116}}}
{"text": "Running evaluation for query: water_filtration_membrane_002\n", "record": {"elapsed": {"repr": "0:00:14.414064", "seconds": 14.414064}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 24456, "name": "MainProcess"}, "thread": {"id": 12744, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:53:57.219092+09:00", "timestamp": 1752933237.219092}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for water_filtration_membrane_002\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 158, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x0000027FB53D0AE0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 86, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'water_filtration_membrane_002', 'question': '水ろ過膜技術に関する特許を検索してください。特に逆浸透膜に焦点を当ててください。', 'search_query': {'ipc_c...\n                          │                     └ {'query_id': 'water_filtration_membrane_002', 'question': '水ろ過膜技術に関する特許を検索してください。特に逆浸透膜に焦点を当ててください。', 'search_query': {'ipc_c...\n                          └ <function run_single_evaluation at 0x0000027FB537BBA0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 61...\n                   └ <function execute_patent_search_workflow at 0x0000027FB537B7E0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 61...\n                  │                    └ <function Pregel.invoke at 0x0000027F908A80E0>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x0000027FB5385E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x0000027F90897F60>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x0000027FB5385E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x0000027F90894E00>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x0000027FB62F5E50>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x0000027F908945E0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 61...\n            │       │   │    └ <function RunnableCallable.invoke at 0x0000027F908579C0>\n            │       │   └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x0000027FB61E9900>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 6...\n          │    └ <function generate_sql_and_explanation at 0x0000027FB534C2C0>\n          └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 186, in generate_sql_and_explanation\n    state.sql_explanation = chain_sql_explain.invoke({\"sql\": sql}).content\n    │     │                 │                 │              └ \"\\nWITH localized_patents AS (\\n  SELECT\\n    p.publication_number,\\n    (SELECT text FROM UNNEST(p.title_localized)    WHERE...\n    │     │                 │                 └ <function RunnableSequence.invoke at 0x0000027F8FF232E0>\n    │     │                 └ ChatPromptTemplate(input_variables=['sql'], input_types={}, partial_variables={}, messages=[HumanMessagePromptTemplate(prompt...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 61...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_pat...\n             │       │   │    └ <function BaseChatModel.invoke at 0x0000027F934A2840>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x0000027FB63CEB80>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x0000027F934A2FC0>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x0000027FB6314D50>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_patents AS (\\n  SELECT\\n   ...\n           │    └ <function BaseChatModel.generate at 0x0000027F934A2E80>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x0000027F934A3100>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x0000027F8F8ED760>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n               │    │      └ <function Completions.create at 0x0000027FB4FDF2E0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>,)\n           └ <function Completions.create at 0x0000027FB4FDF1A0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x0000027FB4F102F0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x0000027F932C87C0>\n           │    │          └ <openai.OpenAI object at 0x0000027FB4F102F0>\n           │    └ ~ResponseT\n           └ <function cast at 0x0000027FFF09D800>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x0000027F932BEF20>\n          └ <openai.OpenAI object at 0x0000027FB4F102F0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nDuring task with name 'generate_sql_and_explanation' and id 'e31d6916-a182-6206-1bba-15a1bacfdbc5'\n", "record": {"elapsed": {"repr": "0:00:16.239357", "seconds": 16.239357}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 73, "message": "  [FATAL] An unexpected exception occurred in workflow execution for water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 24456, "name": "MainProcess"}, "thread": {"id": 12744, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:53:59.044385+09:00", "timestamp": 1752933239.044385}}}
{"text": "Running evaluation for query: autonomous_driving_sensor_fusion_003\n", "record": {"elapsed": {"repr": "0:00:16.247126", "seconds": 16.247126}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 24456, "name": "MainProcess"}, "thread": {"id": 12744, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:53:59.052154+09:00", "timestamp": 1752933239.052154}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for autonomous_driving_sensor_fusion_003\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 158, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x0000027FB53D0AE0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 86, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'autonomous_driving_sensor_fusion_003', 'question': '自動運転におけるセンサーフュージョン技術の特許を調べてください。カメラとLiDARの組み合わせに興味があります。', ...\n                          │                     └ {'query_id': 'autonomous_driving_sensor_fusion_003', 'question': '自動運転におけるセンサーフュージョン技術の特許を調べてください。カメラとLiDARの組み合わせに興味があります。', ...\n                          └ <function run_single_evaluation at 0x0000027FB537BBA0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n                   └ <function execute_patent_search_workflow at 0x0000027FB537B7E0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n                  │                    └ <function Pregel.invoke at 0x0000027F908A80E0>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x0000027FB5385E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x0000027F90897F60>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x0000027FB5385E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x0000027F90894E00>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x0000027FB62F6C10>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x0000027F908945E0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n            │       │   │    └ <function RunnableCallable.invoke at 0x0000027F908579C0>\n            │       │   └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x0000027FB63CE640>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1...\n          │    └ <function generate_sql_and_explanation at 0x0000027FB534C2C0>\n          └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 186, in generate_sql_and_explanation\n    state.sql_explanation = chain_sql_explain.invoke({\"sql\": sql}).content\n    │     │                 │                 │              └ \"\\nWITH localized_patents AS (\\n  SELECT\\n    p.publication_number,\\n    (SELECT text FROM UNNEST(p.title_localized)    WHERE...\n    │     │                 │                 └ <function RunnableSequence.invoke at 0x0000027F8FF232E0>\n    │     │                 └ ChatPromptTemplate(input_variables=['sql'], input_types={}, partial_variables={}, messages=[HumanMessagePromptTemplate(prompt...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_pat...\n             │       │   │    └ <function BaseChatModel.invoke at 0x0000027F934A2840>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x0000027FB63E70C0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x0000027F934A2FC0>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x0000027FB63176D0>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_patents AS (\\n  SELECT\\n   ...\n           │    └ <function BaseChatModel.generate at 0x0000027F934A2E80>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x0000027F934A3100>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x0000027F8F8ED760>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n               │    │      └ <function Completions.create at 0x0000027FB4FDF2E0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>,)\n           └ <function Completions.create at 0x0000027FB4FDF1A0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x0000027FB4F102F0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x0000027FB523ECF0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x0000027F932C87C0>\n           │    │          └ <openai.OpenAI object at 0x0000027FB4F102F0>\n           │    └ ~ResponseT\n           └ <function cast at 0x0000027FFF09D800>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x0000027F932BEF20>\n          └ <openai.OpenAI object at 0x0000027FB4F102F0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nDuring task with name 'generate_sql_and_explanation' and id 'e2d6a594-66d1-28a4-5d6d-2fee8bf96a16'\n", "record": {"elapsed": {"repr": "0:00:18.391414", "seconds": 18.391414}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 73, "message": "  [FATAL] An unexpected exception occurred in workflow execution for autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 24456, "name": "MainProcess"}, "thread": {"id": 12744, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:54:01.196442+09:00", "timestamp": 1752933241.196442}}}
{"text": "Skipping RAGAs evaluation for image_recognition_ai_001 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n", "record": {"elapsed": {"repr": "0:00:18.399214", "seconds": 18.399214}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 91, "message": "Skipping RAGAs evaluation for image_recognition_ai_001 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 24456, "name": "MainProcess"}, "thread": {"id": 12744, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:54:01.204242+09:00", "timestamp": 1752933241.204242}}}
{"text": "Skipping RAGAs evaluation for water_filtration_membrane_002 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n", "record": {"elapsed": {"repr": "0:00:18.399420", "seconds": 18.39942}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 91, "message": "Skipping RAGAs evaluation for water_filtration_membrane_002 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 24456, "name": "MainProcess"}, "thread": {"id": 12744, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:54:01.204448+09:00", "timestamp": 1752933241.204448}}}
{"text": "Skipping RAGAs evaluation for autonomous_driving_sensor_fusion_003 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n", "record": {"elapsed": {"repr": "0:00:18.399574", "seconds": 18.399574}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 91, "message": "Skipping RAGAs evaluation for autonomous_driving_sensor_fusion_003 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 24456, "name": "MainProcess"}, "thread": {"id": 12744, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:54:01.204602+09:00", "timestamp": 1752933241.204602}}}
{"text": "No valid results to evaluate with RAGAs.\n", "record": {"elapsed": {"repr": "0:00:18.399706", "seconds": 18.399706}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 127, "message": "No valid results to evaluate with RAGAs.", "module": "run_evaluation", "name": "__main__", "process": {"id": 24456, "name": "MainProcess"}, "thread": {"id": 12744, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:54:01.204734+09:00", "timestamp": 1752933241.204734}}}
{"text": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json\n", "record": {"elapsed": {"repr": "0:00:18.401693", "seconds": 18.401693}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 137, "message": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json", "module": "run_evaluation", "name": "__main__", "process": {"id": 24456, "name": "MainProcess"}, "thread": {"id": 12744, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:54:01.206721+09:00", "timestamp": 1752933241.206721}}}
{"text": "{\n  \"status\": \"No evaluation performed.\"\n}\n", "record": {"elapsed": {"repr": "0:00:18.401937", "seconds": 18.401937}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 138, "message": "{\n  \"status\": \"No evaluation performed.\"\n}", "module": "run_evaluation", "name": "__main__", "process": {"id": 24456, "name": "MainProcess"}, "thread": {"id": 12744, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:54:01.206965+09:00", "timestamp": 1752933241.206965}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:12.061332", "seconds": 12.061332}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 83, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 28080, "name": "MainProcess"}, "thread": {"id": 25096, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:55:30.441193+09:00", "timestamp": 1752933330.441193}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:12.062557", "seconds": 12.062557}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 28080, "name": "MainProcess"}, "thread": {"id": 25096, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:55:30.442418+09:00", "timestamp": 1752933330.442418}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 146, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000002C40E24CAE0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 86, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          │                     └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          └ <function run_single_evaluation at 0x000002C40E1FBBA0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                   └ <function execute_patent_search_workflow at 0x000002C40E1FB7E0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                  │                    └ <function Pregel.invoke at 0x000002C4696E80E0>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x000002C40E205E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x000002C4696D7F60>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x000002C40E205E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x000002C4696D4E00>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x000002C40EFAA900>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x000002C4696D45E0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n            │       │   │    └ <function RunnableCallable.invoke at 0x000002C4696979C0>\n            │       │   └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x000002C40F00C440>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 1...\n          │    └ <function generate_sql_and_explanation at 0x000002C40E1CC2C0>\n          └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 186, in generate_sql_and_explanation\n    state.sql_explanation = chain_sql_explain.invoke({\"sql\": sql}).content\n    │     │                 │                 │              └ \"\\nWITH localized_patents AS (\\n  SELECT\\n    p.publication_number,\\n    (SELECT text FROM UNNEST(p.title_localized)    WHERE...\n    │     │                 │                 └ <function RunnableSequence.invoke at 0x000002C468D332E0>\n    │     │                 └ ChatPromptTemplate(input_variables=['sql'], input_types={}, partial_variables={}, messages=[HumanMessagePromptTemplate(prompt...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_pat...\n             │       │   │    └ <function BaseChatModel.invoke at 0x000002C46C2D2840>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x000002C40F01A080>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x000002C46C2D2FC0>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x000002C40F007850>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_patents AS (\\n  SELECT\\n   ...\n           │    └ <function BaseChatModel.generate at 0x000002C46C2D2E80>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x000002C46C2D3100>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x000002C4686FD760>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n               │    │      └ <function Completions.create at 0x000002C40DE5F2E0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>,)\n           └ <function Completions.create at 0x000002C40DE5F1A0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x000002C40DD88440>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x000002C46C0F87C0>\n           │    │          └ <openai.OpenAI object at 0x000002C40DD88440>\n           │    └ ~ResponseT\n           └ <function cast at 0x000002C463F7D800>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x000002C46C0EEF20>\n          └ <openai.OpenAI object at 0x000002C40DD88440>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nDuring task with name 'generate_sql_and_explanation' and id '2cf403f6-4e4f-7ed1-9f8e-e807efb7f681'\n", "record": {"elapsed": {"repr": "0:00:14.978545", "seconds": 14.978545}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 73, "message": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 28080, "name": "MainProcess"}, "thread": {"id": 25096, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:55:33.358406+09:00", "timestamp": 1752933333.358406}}}
{"text": "Running evaluation for query: water_filtration_membrane_002\n", "record": {"elapsed": {"repr": "0:00:14.995787", "seconds": 14.995787}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 28080, "name": "MainProcess"}, "thread": {"id": 25096, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:55:33.375648+09:00", "timestamp": 1752933333.375648}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for water_filtration_membrane_002\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 146, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000002C40E24CAE0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 86, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'water_filtration_membrane_002', 'question': '水ろ過膜技術に関する特許を検索してください。特に逆浸透膜に焦点を当ててください。', 'search_query': {'ipc_c...\n                          │                     └ {'query_id': 'water_filtration_membrane_002', 'question': '水ろ過膜技術に関する特許を検索してください。特に逆浸透膜に焦点を当ててください。', 'search_query': {'ipc_c...\n                          └ <function run_single_evaluation at 0x000002C40E1FBBA0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 61...\n                   └ <function execute_patent_search_workflow at 0x000002C40E1FB7E0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 61...\n                  │                    └ <function Pregel.invoke at 0x000002C4696E80E0>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x000002C40E205E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x000002C4696D7F60>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x000002C40E205E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x000002C4696D4E00>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x000002C40F125E50>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x000002C4696D45E0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 61...\n            │       │   │    └ <function RunnableCallable.invoke at 0x000002C4696979C0>\n            │       │   └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x000002C40F019640>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 6...\n          │    └ <function generate_sql_and_explanation at 0x000002C40E1CC2C0>\n          └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 186, in generate_sql_and_explanation\n    state.sql_explanation = chain_sql_explain.invoke({\"sql\": sql}).content\n    │     │                 │                 │              └ \"\\nWITH localized_patents AS (\\n  SELECT\\n    p.publication_number,\\n    (SELECT text FROM UNNEST(p.title_localized)    WHERE...\n    │     │                 │                 └ <function RunnableSequence.invoke at 0x000002C468D332E0>\n    │     │                 └ ChatPromptTemplate(input_variables=['sql'], input_types={}, partial_variables={}, messages=[HumanMessagePromptTemplate(prompt...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['B01D 61...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_pat...\n             │       │   │    └ <function BaseChatModel.invoke at 0x000002C46C2D2840>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x000002C40F1FEC00>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x000002C46C2D2FC0>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x000002C40F144BD0>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_patents AS (\\n  SELECT\\n   ...\n           │    └ <function BaseChatModel.generate at 0x000002C46C2D2E80>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x000002C46C2D3100>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x000002C4686FD760>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n               │    │      └ <function Completions.create at 0x000002C40DE5F2E0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>,)\n           └ <function Completions.create at 0x000002C40DE5F1A0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x000002C40DD88440>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x000002C46C0F87C0>\n           │    │          └ <openai.OpenAI object at 0x000002C40DD88440>\n           │    └ ~ResponseT\n           └ <function cast at 0x000002C463F7D800>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x000002C46C0EEF20>\n          └ <openai.OpenAI object at 0x000002C40DD88440>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nDuring task with name 'generate_sql_and_explanation' and id '4bd09e60-322e-d3ac-9ea3-ad51e550fbea'\n", "record": {"elapsed": {"repr": "0:00:17.742847", "seconds": 17.742847}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 73, "message": "  [FATAL] An unexpected exception occurred in workflow execution for water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 28080, "name": "MainProcess"}, "thread": {"id": 25096, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:55:36.122708+09:00", "timestamp": 1752933336.122708}}}
{"text": "Running evaluation for query: autonomous_driving_sensor_fusion_003\n", "record": {"elapsed": {"repr": "0:00:17.748211", "seconds": 17.748211}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 28080, "name": "MainProcess"}, "thread": {"id": 25096, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:55:36.128072+09:00", "timestamp": 1752933336.128072}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for autonomous_driving_sensor_fusion_003\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 146, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x000002C40E24CAE0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 86, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'autonomous_driving_sensor_fusion_003', 'question': '自動運転におけるセンサーフュージョン技術の特許を調べてください。カメラとLiDARの組み合わせに興味があります。', ...\n                          │                     └ {'query_id': 'autonomous_driving_sensor_fusion_003', 'question': '自動運転におけるセンサーフュージョン技術の特許を調べてください。カメラとLiDARの組み合わせに興味があります。', ...\n                          └ <function run_single_evaluation at 0x000002C40E1FBBA0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n                   └ <function execute_patent_search_workflow at 0x000002C40E1FB7E0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n                  │                    └ <function Pregel.invoke at 0x000002C4696E80E0>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x000002C40E205E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x000002C4696D7F60>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x000002C40E205E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x000002C4696D4E00>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x000002C40F126C10>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x000002C4696D45E0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n            │       │   │    └ <function RunnableCallable.invoke at 0x000002C4696979C0>\n            │       │   └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x000002C40F1FE6C0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1...\n          │    └ <function generate_sql_and_explanation at 0x000002C40E1CC2C0>\n          └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 186, in generate_sql_and_explanation\n    state.sql_explanation = chain_sql_explain.invoke({\"sql\": sql}).content\n    │     │                 │                 │              └ \"\\nWITH localized_patents AS (\\n  SELECT\\n    p.publication_number,\\n    (SELECT text FROM UNNEST(p.title_localized)    WHERE...\n    │     │                 │                 └ <function RunnableSequence.invoke at 0x000002C468D332E0>\n    │     │                 └ ChatPromptTemplate(input_variables=['sql'], input_types={}, partial_variables={}, messages=[HumanMessagePromptTemplate(prompt...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_pat...\n             │       │   │    └ <function BaseChatModel.invoke at 0x000002C46C2D2840>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x000002C40F217080>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x000002C46C2D2FC0>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x000002C40F147550>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_patents AS (\\n  SELECT\\n   ...\n           │    └ <function BaseChatModel.generate at 0x000002C46C2D2E80>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x000002C46C2D3100>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x000002C4686FD760>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n               │    │      └ <function Completions.create at 0x000002C40DE5F2E0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>,)\n           └ <function Completions.create at 0x000002C40DE5F1A0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x000002C40DD88440>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x000002C40E00AE40>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x000002C46C0F87C0>\n           │    │          └ <openai.OpenAI object at 0x000002C40DD88440>\n           │    └ ~ResponseT\n           └ <function cast at 0x000002C463F7D800>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x000002C46C0EEF20>\n          └ <openai.OpenAI object at 0x000002C40DD88440>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nDuring task with name 'generate_sql_and_explanation' and id '24cb72dc-cd00-357e-731f-05539db94087'\n", "record": {"elapsed": {"repr": "0:00:19.687973", "seconds": 19.687973}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 73, "message": "  [FATAL] An unexpected exception occurred in workflow execution for autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 28080, "name": "MainProcess"}, "thread": {"id": 25096, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:55:38.067834+09:00", "timestamp": 1752933338.067834}}}
{"text": "Skipping RAGAs evaluation for image_recognition_ai_001 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n", "record": {"elapsed": {"repr": "0:00:19.694709", "seconds": 19.694709}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 91, "message": "Skipping RAGAs evaluation for image_recognition_ai_001 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 28080, "name": "MainProcess"}, "thread": {"id": 25096, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:55:38.074570+09:00", "timestamp": 1752933338.07457}}}
{"text": "Skipping RAGAs evaluation for water_filtration_membrane_002 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n", "record": {"elapsed": {"repr": "0:00:19.694959", "seconds": 19.694959}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 91, "message": "Skipping RAGAs evaluation for water_filtration_membrane_002 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 28080, "name": "MainProcess"}, "thread": {"id": 25096, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:55:38.074820+09:00", "timestamp": 1752933338.07482}}}
{"text": "Skipping RAGAs evaluation for autonomous_driving_sensor_fusion_003 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n", "record": {"elapsed": {"repr": "0:00:19.695132", "seconds": 19.695132}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 91, "message": "Skipping RAGAs evaluation for autonomous_driving_sensor_fusion_003 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 28080, "name": "MainProcess"}, "thread": {"id": 25096, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:55:38.074993+09:00", "timestamp": 1752933338.074993}}}
{"text": "No valid results to evaluate with RAGAs.\n", "record": {"elapsed": {"repr": "0:00:19.695304", "seconds": 19.695304}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 118, "message": "No valid results to evaluate with RAGAs.", "module": "run_evaluation", "name": "__main__", "process": {"id": 28080, "name": "MainProcess"}, "thread": {"id": 25096, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:55:38.075165+09:00", "timestamp": 1752933338.075165}}}
{"text": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json\n", "record": {"elapsed": {"repr": "0:00:19.697498", "seconds": 19.697498}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 125, "message": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json", "module": "run_evaluation", "name": "__main__", "process": {"id": 28080, "name": "MainProcess"}, "thread": {"id": 25096, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:55:38.077359+09:00", "timestamp": 1752933338.077359}}}
{"text": "{\n  \"status\": \"No evaluation performed.\"\n}\n", "record": {"elapsed": {"repr": "0:00:19.697781", "seconds": 19.697781}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 126, "message": "{\n  \"status\": \"No evaluation performed.\"\n}", "module": "run_evaluation", "name": "__main__", "process": {"id": 28080, "name": "MainProcess"}, "thread": {"id": 25096, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:55:38.077642+09:00", "timestamp": 1752933338.077642}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:11.943612", "seconds": 11.943612}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 83, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 24828, "name": "MainProcess"}, "thread": {"id": 1772, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:56:35.983362+09:00", "timestamp": 1752933395.983362}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:11.953764", "seconds": 11.953764}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 24828, "name": "MainProcess"}, "thread": {"id": 1772, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:56:35.993514+09:00", "timestamp": 1752933395.993514}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 146, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x00000207B6600AE0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 86, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          │                     └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          └ <function run_single_evaluation at 0x00000207B65ABBA0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                   └ <function execute_patent_search_workflow at 0x00000207B65AB7E0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                  │                    └ <function Pregel.invoke at 0x0000020791AC80E0>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x00000207B65B5E50>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x0000020791AB7F60>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x00000207B65B5E50>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x0000020791AB4E00>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x00000207B836A900>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x0000020791AB45E0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='generate_sql_and_explanation', input=AppState(chat_history=[], plan_text='This is a dummy plan tex...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('branch:to:genera...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n            │       │   │    └ <function RunnableCallable.invoke at 0x0000020791A779C0>\n            │       │   └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x00000207B839E3C0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 1...\n          │    └ <function generate_sql_and_explanation at 0x00000207B657C2C0>\n          └ generate_sql_and_explanation(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 186, in generate_sql_and_explanation\n    state.sql_explanation = chain_sql_explain.invoke({\"sql\": sql}).content\n    │     │                 │                 │              └ \"\\nWITH localized_patents AS (\\n  SELECT\\n    p.publication_number,\\n    (SELECT text FROM UNNEST(p.title_localized)    WHERE...\n    │     │                 │                 └ <function RunnableSequence.invoke at 0x00000207911172E0>\n    │     │                 └ ChatPromptTemplate(input_variables=['sql'], input_types={}, partial_variables={}, messages=[HumanMessagePromptTemplate(prompt...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_pat...\n             │       │   │    └ <function BaseChatModel.invoke at 0x00000207946D2840>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000207B63BAE40>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x00000207B83D9480>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x00000207946D2FC0>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000207B63BAE40>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 1, 'langgraph_node': 'generate_sql_and_explanation', 'langgraph_triggers': ('bran...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x00000207B83C75D0>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content=\"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説してください。\\n\\nSQL:\\n\\nWITH localized_patents AS (\\n  SELECT\\n   ...\n           │    └ <function BaseChatModel.generate at 0x00000207946D2E80>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000207B63BAE40>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x00000207946D3100>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000207B63BAE40>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x0000020790ADD760>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000207B63BAE40>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n               │    │      └ <function Completions.create at 0x00000207B620F2E0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x00000207B63BAE40>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000207B63BAE40>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': \"以下の特許検索SQLが何をしているのか、技術者でない人にも分かるように簡潔に解説して...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x00000207B63BAE40>,)\n           └ <function Completions.create at 0x00000207B620F1A0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x00000207B6138440>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x00000207B63BAE40>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x00000207944F87C0>\n           │    │          └ <openai.OpenAI object at 0x00000207B6138440>\n           │    └ ~ResponseT\n           └ <function cast at 0x00000207FFEED800>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x00000207944EEF20>\n          └ <openai.OpenAI object at 0x00000207B6138440>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\nDuring task with name 'generate_sql_and_explanation' and id 'aaeacf23-e9c9-1a88-2fe3-cfcb75c56e96'\n", "record": {"elapsed": {"repr": "0:00:13.891664", "seconds": 13.891664}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 73, "message": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 24828, "name": "MainProcess"}, "thread": {"id": 1772, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:56:37.931414+09:00", "timestamp": 1752933397.931414}}}
{"text": "Skipping RAGAs evaluation for image_recognition_ai_001 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}\n", "record": {"elapsed": {"repr": "0:00:13.913281", "seconds": 13.913281}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 91, "message": "Skipping RAGAs evaluation for image_recognition_ai_001 due to error: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 24828, "name": "MainProcess"}, "thread": {"id": 1772, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:56:37.953031+09:00", "timestamp": 1752933397.953031}}}
{"text": "No valid results to evaluate with RAGAs.\n", "record": {"elapsed": {"repr": "0:00:13.913496", "seconds": 13.913496}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 118, "message": "No valid results to evaluate with RAGAs.", "module": "run_evaluation", "name": "__main__", "process": {"id": 24828, "name": "MainProcess"}, "thread": {"id": 1772, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:56:37.953246+09:00", "timestamp": 1752933397.953246}}}
{"text": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json\n", "record": {"elapsed": {"repr": "0:00:13.915502", "seconds": 13.915502}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 125, "message": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json", "module": "run_evaluation", "name": "__main__", "process": {"id": 24828, "name": "MainProcess"}, "thread": {"id": 1772, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:56:37.955252+09:00", "timestamp": 1752933397.955252}}}
{"text": "{\n  \"status\": \"No evaluation performed.\"\n}\n", "record": {"elapsed": {"repr": "0:00:13.915727", "seconds": 13.915727}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 126, "message": "{\n  \"status\": \"No evaluation performed.\"\n}", "module": "run_evaluation", "name": "__main__", "process": {"id": 24828, "name": "MainProcess"}, "thread": {"id": 1772, "name": "MainThread"}, "time": {"repr": "2025-07-19 22:56:37.955477+09:00", "timestamp": 1752933397.955477}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:10.602694", "seconds": 10.602694}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 83, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 27256, "name": "MainProcess"}, "thread": {"id": 4656, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:12:11.030497+09:00", "timestamp": 1752934331.030497}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:10.604722", "seconds": 10.604722}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 27256, "name": "MainProcess"}, "thread": {"id": 4656, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:12:11.032525+09:00", "timestamp": 1752934331.032525}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 146, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x00000174CE5284A0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 86, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          │                     └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          └ <function run_single_evaluation at 0x00000174CE5280E0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                   └ <function execute_patent_search_workflow at 0x00000174CE4EFCE0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                  │                    └ <function Pregel.invoke at 0x00000174A8E36B60>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x00000174CE4B6990>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x00000174A8E36A20>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x00000174CE4B6990>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x00000174A8E0F880>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x00000174D036E510>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x00000174A8E0F060>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch:to:summariz...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='summarize_selected_patents', input=AppState(chat_history=[], plan_text='This is a dummy plan text ...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='summarize_selected_patents', input=AppState(chat_history=[], plan_text='This is a dummy plan text ...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch:to:summariz...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n            │       │   │    └ <function RunnableCallable.invoke at 0x00000174A8DDE480>\n            │       │   └ summarize_selected_patents(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x00000174D03A5E40>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 1...\n          │    └ <function summarize_selected_patents at 0x00000174CE4EE520>\n          └ summarize_selected_patents(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 286, in summarize_selected_patents\n    state.summary_result = chain.invoke({\"patent_list\": patent_list_str, \"plan_text\": state.plan_text}).content\n    │     │                │     │                      │                             │     └ 'This is a dummy plan text for evaluation.'\n    │     │                │     │                      │                             └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n    │     │                │     │                      └ 'publication_number                                                                                                          ...\n    │     │                │     └ <function RunnableSequence.invoke at 0x00000174A8394720>\n    │     │                └ ChatPromptTemplate(input_variables=['patent_list', 'plan_text'], input_types={}, partial_variables={}, messages=[HumanMessage...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content='あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複数の特許情報について、それぞれの要点をまとめ、元の質問（調査方針）に最...\n             │       │   │    └ <function BaseChatModel.invoke at 0x00000174AC9059E0>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000174CE2A78C0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x00000174D02A7440>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x00000174AC906160>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000174CE2A78C0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x00000174CDFD80D0>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content='あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複数の特許情報について、それぞれの要点をまとめ、元の質問（調査方針）に最も関連性の高い情報を強調しながら解説してください...\n           │    └ <function BaseChatModel.generate at 0x00000174AC906020>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000174CE2A78C0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x00000174AC9062A0>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000174CE2A78C0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x00000174ACA48900>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000174CE2A78C0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': 'あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複...\n               │    │      └ <function Completions.create at 0x00000174CE14F7E0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x00000174CE2A78C0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000174CE2A78C0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': 'あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x00000174CE2A78C0>,)\n           └ <function Completions.create at 0x00000174CE14F6A0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x00000174CE0592B0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x00000174CE2A78C0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x00000174AC71F9C0>\n           │    │          └ <openai.OpenAI object at 0x00000174CE0592B0>\n           │    └ ~ResponseT\n           └ <function cast at 0x00000174A35E2200>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x00000174AC71E160>\n          └ <openai.OpenAI object at 0x00000174CE0592B0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 74915. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}\nDuring task with name 'summarize_selected_patents' and id '72ff393a-f5b0-1389-3639-6d28de66aa96'\n", "record": {"elapsed": {"repr": "0:00:39.008095", "seconds": 39.008095}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 74915. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 73, "message": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 27256, "name": "MainProcess"}, "thread": {"id": 4656, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:12:39.435898+09:00", "timestamp": 1752934359.435898}}}
{"text": "Running evaluation for query: water_filtration_membrane_002\n", "record": {"elapsed": {"repr": "0:00:39.171275", "seconds": 39.171275}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 27256, "name": "MainProcess"}, "thread": {"id": 4656, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:12:39.599078+09:00", "timestamp": 1752934359.599078}}}
{"text": "Running evaluation for query: autonomous_driving_sensor_fusion_003\n", "record": {"elapsed": {"repr": "0:01:10.506621", "seconds": 70.506621}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 27256, "name": "MainProcess"}, "thread": {"id": 4656, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:13:10.934424+09:00", "timestamp": 1752934390.934424}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for autonomous_driving_sensor_fusion_003\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 146, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x00000174CE5284A0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 86, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'autonomous_driving_sensor_fusion_003', 'question': '自動運転におけるセンサーフュージョン技術の特許を調べてください。カメラとLiDARの組み合わせに興味があります。', ...\n                          │                     └ {'query_id': 'autonomous_driving_sensor_fusion_003', 'question': '自動運転におけるセンサーフュージョン技術の特許を調べてください。カメラとLiDARの組み合わせに興味があります。', ...\n                          └ <function run_single_evaluation at 0x00000174CE5280E0>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n                   └ <function execute_patent_search_workflow at 0x00000174CE4EFCE0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 331, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n                  │                    └ <function Pregel.invoke at 0x00000174A8E36B60>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x00000174CE4B6990>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x00000174A8E36A20>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x00000174CE4B6990>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x00000174A8E0F880>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x00000174D0461810>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x00000174A8E0F060>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch:to:summariz...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='summarize_selected_patents', input=AppState(chat_history=[], plan_text='This is a dummy plan text ...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='summarize_selected_patents', input=AppState(chat_history=[], plan_text='This is a dummy plan text ...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch:to:summariz...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n            │       │   │    └ <function RunnableCallable.invoke at 0x00000174A8DDE480>\n            │       │   └ summarize_selected_patents(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x00000174D03D8500>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1...\n          │    └ <function summarize_selected_patents at 0x00000174CE4EE520>\n          └ summarize_selected_patents(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 286, in summarize_selected_patents\n    state.summary_result = chain.invoke({\"patent_list\": patent_list_str, \"plan_text\": state.plan_text}).content\n    │     │                │     │                      │                             │     └ 'This is a dummy plan text for evaluation.'\n    │     │                │     │                      │                             └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n    │     │                │     │                      └ 'publication_number                                                                                                          ...\n    │     │                │     └ <function RunnableSequence.invoke at 0x00000174A8394720>\n    │     │                └ ChatPromptTemplate(input_variables=['patent_list', 'plan_text'], input_types={}, partial_variables={}, messages=[HumanMessage...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content='あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複数の特許情報について、それぞれの要点をまとめ、元の質問（調査方針）に最...\n             │       │   │    └ <function BaseChatModel.invoke at 0x00000174AC9059E0>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000174CE2A78C0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x00000174D0C8DB00>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x00000174AC906160>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000174CE2A78C0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x00000174D0CA2550>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content='あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複数の特許情報について、それぞれの要点をまとめ、元の質問（調査方針）に最も関連性の高い情報を強調しながら解説してください...\n           │    └ <function BaseChatModel.generate at 0x00000174AC906020>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000174CE2A78C0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x00000174AC9062A0>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000174CE2A78C0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x00000174ACA48900>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000174CE2A78C0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': 'あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複...\n               │    │      └ <function Completions.create at 0x00000174CE14F7E0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x00000174CE2A78C0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x00000174CE2A78C0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': 'あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x00000174CE2A78C0>,)\n           └ <function Completions.create at 0x00000174CE14F6A0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x00000174CE0592B0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x00000174CE2A78C0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x00000174AC71F9C0>\n           │    │          └ <openai.OpenAI object at 0x00000174CE0592B0>\n           │    └ ~ResponseT\n           └ <function cast at 0x00000174A35E2200>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x00000174AC71E160>\n          └ <openai.OpenAI object at 0x00000174CE0592B0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 61700. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}\nDuring task with name 'summarize_selected_patents' and id '89a0d172-8dd9-2b8a-1582-015b963938dc'\n", "record": {"elapsed": {"repr": "0:01:35.329807", "seconds": 95.329807}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 61700. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 73, "message": "  [FATAL] An unexpected exception occurred in workflow execution for autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 27256, "name": "MainProcess"}, "thread": {"id": 4656, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:13:35.757610+09:00", "timestamp": 1752934415.75761}}}
{"text": "Skipping RAGAs evaluation for image_recognition_ai_001 due to error: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 74915. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}\n", "record": {"elapsed": {"repr": "0:01:35.487800", "seconds": 95.4878}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 91, "message": "Skipping RAGAs evaluation for image_recognition_ai_001 due to error: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 74915. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 27256, "name": "MainProcess"}, "thread": {"id": 4656, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:13:35.915603+09:00", "timestamp": 1752934415.915603}}}
{"text": "Skipping RAGAs evaluation for autonomous_driving_sensor_fusion_003 due to error: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 61700. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}\n", "record": {"elapsed": {"repr": "0:01:35.487950", "seconds": 95.48795}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 91, "message": "Skipping RAGAs evaluation for autonomous_driving_sensor_fusion_003 due to error: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 61700. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 27256, "name": "MainProcess"}, "thread": {"id": 4656, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:13:35.915753+09:00", "timestamp": 1752934415.915753}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:01:35.488058", "seconds": 95.488058}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 106, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 27256, "name": "MainProcess"}, "thread": {"id": 4656, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:13:35.915861+09:00", "timestamp": 1752934415.915861}}}
{"text": "Starting RAGAs evaluation within metrics.py...\n", "record": {"elapsed": {"repr": "0:01:35.494619", "seconds": 95.494619}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 30, "message": "Starting RAGAs evaluation within metrics.py...", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 27256, "name": "MainProcess"}, "thread": {"id": 4656, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:13:35.922422+09:00", "timestamp": 1752934415.922422}}}
{"text": "RAGAs evaluation completed successfully within metrics.py.\n", "record": {"elapsed": {"repr": "0:02:22.743244", "seconds": 142.743244}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 34, "message": "RAGAs evaluation completed successfully within metrics.py.", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 27256, "name": "MainProcess"}, "thread": {"id": 4656, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:14:23.171047+09:00", "timestamp": 1752934463.171047}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:02:22.743601", "seconds": 142.743601}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 113, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 27256, "name": "MainProcess"}, "thread": {"id": 4656, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:14:23.171404+09:00", "timestamp": 1752934463.171404}}}
{"text": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json\n", "record": {"elapsed": {"repr": "0:02:22.764546", "seconds": 142.764546}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 125, "message": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json", "module": "run_evaluation", "name": "__main__", "process": {"id": 27256, "name": "MainProcess"}, "thread": {"id": 4656, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:14:23.192349+09:00", "timestamp": 1752934463.192349}}}
{"text": "{\n  \"faithfulness\": 0.4,\n  \"answer_relevancy\": 0.7797115225909789\n}\n", "record": {"elapsed": {"repr": "0:02:22.765149", "seconds": 142.765149}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 126, "message": "{\n  \"faithfulness\": 0.4,\n  \"answer_relevancy\": 0.7797115225909789\n}", "module": "run_evaluation", "name": "__main__", "process": {"id": 27256, "name": "MainProcess"}, "thread": {"id": 4656, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:14:23.192952+09:00", "timestamp": 1752934463.192952}}}
{"text": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl\n", "record": {"elapsed": {"repr": "0:00:12.843458", "seconds": 12.843458}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 83, "message": "Loading gold standard from: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\gold_standard.jsonl", "module": "run_evaluation", "name": "__main__", "process": {"id": 3196, "name": "MainProcess"}, "thread": {"id": 18664, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:15:26.772368+09:00", "timestamp": 1752934526.772368}}}
{"text": "Running evaluation for query: image_recognition_ai_001\n", "record": {"elapsed": {"repr": "0:00:12.844053", "seconds": 12.844053}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 3196, "name": "MainProcess"}, "thread": {"id": 18664, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:15:26.772963+09:00", "timestamp": 1752934526.772963}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 146, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x0000029C56138360>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 86, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          │                     └ {'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10/...\n                          └ <function run_single_evaluation at 0x0000029C560FBF60>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                   └ <function execute_patent_search_workflow at 0x0000029C560FBBA0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 338, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n                  │                    └ <function Pregel.invoke at 0x0000029C30976A20>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x0000029C560D6990>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x0000029C309768E0>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x0000029C560D6990>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x0000029C3095B740>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x0000029C57E9E510>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x0000029C3095AF20>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch:to:summariz...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='summarize_selected_patents', input=AppState(chat_history=[], plan_text='This is a dummy plan text ...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='summarize_selected_patents', input=AppState(chat_history=[], plan_text='This is a dummy plan text ...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch:to:summariz...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n            │       │   │    └ <function RunnableCallable.invoke at 0x0000029C30922340>\n            │       │   └ summarize_selected_patents(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x0000029C57ED5E40>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 1...\n          │    └ <function summarize_selected_patents at 0x0000029C560FA3E0>\n          └ summarize_selected_patents(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 293, in summarize_selected_patents\n    state.summary_result = chain.invoke({\"patent_list\": patent_list_str, \"plan_text\": state.plan_text}).content\n    │     │                │     │                      │                             │     └ 'This is a dummy plan text for evaluation.'\n    │     │                │     │                      │                             └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n    │     │                │     │                      └ 'publication_number                                                                                                          ...\n    │     │                │     └ <function RunnableSequence.invoke at 0x0000029C2FED85E0>\n    │     │                └ ChatPromptTemplate(input_variables=['patent_list', 'plan_text'], input_types={}, partial_variables={}, messages=[HumanMessage...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G06V 10...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content='あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複数の特許情報について、**提供された特許リストの情報に厳密に基づき**...\n             │       │   │    └ <function BaseChatModel.invoke at 0x0000029C345158A0>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000029C55EB38C0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x0000029C57F090C0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x0000029C34516020>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000029C55EB38C0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x0000029C55BE8050>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content='あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複数の特許情報について、**提供された特許リストの情報に厳密に基づき**、調査方針との関連性を分析し、報告書を作成してく...\n           │    └ <function BaseChatModel.generate at 0x0000029C34515EE0>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000029C55EB38C0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x0000029C34516160>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000029C55EB38C0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x0000029C346587C0>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000029C55EB38C0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': 'あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複...\n               │    │      └ <function Completions.create at 0x0000029C55D5F6A0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x0000029C55EB38C0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000029C55EB38C0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': 'あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x0000029C55EB38C0>,)\n           └ <function Completions.create at 0x0000029C55D5F560>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x0000029C55C692B0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x0000029C55EB38C0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x0000029C34333880>\n           │    │          └ <openai.OpenAI object at 0x0000029C55C692B0>\n           │    └ ~ResponseT\n           └ <function cast at 0x0000029C2B062200>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x0000029C34332020>\n          └ <openai.OpenAI object at 0x0000029C55C692B0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 74997. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}\nDuring task with name 'summarize_selected_patents' and id 'ffa1e588-61b8-8bdb-ccb2-01c74a6ab5a0'\n", "record": {"elapsed": {"repr": "0:00:37.308493", "seconds": 37.308493}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 74997. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 73, "message": "  [FATAL] An unexpected exception occurred in workflow execution for image_recognition_ai_001", "module": "run_evaluation", "name": "__main__", "process": {"id": 3196, "name": "MainProcess"}, "thread": {"id": 18664, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:15:51.237403+09:00", "timestamp": 1752934551.237403}}}
{"text": "Running evaluation for query: water_filtration_membrane_002\n", "record": {"elapsed": {"repr": "0:00:37.521995", "seconds": 37.521995}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: water_filtration_membrane_002", "module": "run_evaluation", "name": "__main__", "process": {"id": 3196, "name": "MainProcess"}, "thread": {"id": 18664, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:15:51.450905+09:00", "timestamp": 1752934551.450905}}}
{"text": "Running evaluation for query: autonomous_driving_sensor_fusion_003\n", "record": {"elapsed": {"repr": "0:01:09.262860", "seconds": 69.26286}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 38, "message": "Running evaluation for query: autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 3196, "name": "MainProcess"}, "thread": {"id": 18664, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:16:23.191770+09:00", "timestamp": 1752934583.19177}}}
{"text": "  [FATAL] An unexpected exception occurred in workflow execution for autonomous_driving_sensor_fusion_003\nTraceback (most recent call last):\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 146, in <module>\n    main(args)\n    │    └ Namespace(gold_standard='evaluation/gold_standard.jsonl', output_report='reports/metrics_report.json')\n    └ <function main at 0x0000029C56138360>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 86, in main\n    evaluation_results = [run_single_evaluation(item) for item in gold_standard]\n                          │                     │         │       └ [{'query_id': 'image_recognition_ai_001', 'question': 'AIを用いた画像認識技術に関する特許を検索してください。', 'search_query': {'ipc_codes': ['G06V 10...\n                          │                     │         └ {'query_id': 'autonomous_driving_sensor_fusion_003', 'question': '自動運転におけるセンサーフュージョン技術の特許を調べてください。カメラとLiDARの組み合わせに興味があります。', ...\n                          │                     └ {'query_id': 'autonomous_driving_sensor_fusion_003', 'question': '自動運転におけるセンサーフュージョン技術の特許を調べてください。カメラとLiDARの組み合わせに興味があります。', ...\n                          └ <function run_single_evaluation at 0x0000029C560FBF60>\n\n> File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py\", line 50, in run_single_evaluation\n    result_state = execute_patent_search_workflow(app_state)\n                   │                              └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n                   └ <function execute_patent_search_workflow at 0x0000029C560FBBA0>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 338, in execute_patent_search_workflow\n    result_dict = search_execution_app.invoke(state)\n                  │                    │      └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n                  │                    └ <function Pregel.invoke at 0x0000029C30976A20>\n                  └ <langgraph.graph.state.CompiledStateGraph object at 0x0000029C560D6990>\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2844, in invoke\n    for chunk in self.stream(\n        │        │    └ <function Pregel.stream at 0x0000029C309768E0>\n        │        └ <langgraph.graph.state.CompiledStateGraph object at 0x0000029C560D6990>\n        └ ('values', {'chat_history': [], 'plan_text': 'This is a dummy plan text for evaluation.', 'search_query': SearchQuery(ipc_cod...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\__init__.py\", line 2534, in stream\n    for _ in runner.tick(\n        │    │      └ <function PregelRunner.tick at 0x0000029C3095B740>\n        │    └ <langgraph.pregel.runner.PregelRunner object at 0x0000029C57F91810>\n        └ None\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\runner.py\", line 162, in tick\n    run_with_retry(\n    └ <function run_with_retry at 0x0000029C3095AF20>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\pregel\\retry.py\", line 42, in run_with_retry\n    return task.proc.invoke(task.input, config)\n           │    │           │    │      └ {'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch:to:summariz...\n           │    │           │    └ <member 'input' of 'PregelExecutableTask' objects>\n           │    │           └ PregelExecutableTask(name='summarize_selected_patents', input=AppState(chat_history=[], plan_text='This is a dummy plan text ...\n           │    └ <member 'proc' of 'PregelExecutableTask' objects>\n           └ PregelExecutableTask(name='summarize_selected_patents', input=AppState(chat_history=[], plan_text='This is a dummy plan text ...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 623, in invoke\n    input = context.run(step.invoke, input, config, **kwargs)\n            │       │   │    │       │      │         └ {}\n            │       │   │    │       │      └ {'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch:to:summariz...\n            │       │   │    │       └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n            │       │   │    └ <function RunnableCallable.invoke at 0x0000029C30922340>\n            │       │   └ summarize_selected_patents(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n            │       └ <method 'run' of '_contextvars.Context' objects>\n            └ <_contextvars.Context object at 0x0000029C57F08500>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langgraph\\utils\\runnable.py\", line 377, in invoke\n    ret = self.func(*args, **kwargs)\n          │    │     │       └ {}\n          │    │     └ (AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1...\n          │    └ <function summarize_selected_patents at 0x0000029C560FA3E0>\n          └ summarize_selected_patents(tags=None, recurse=True, explode_args=False, func_accepts_config=False, func_accepts={})\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\patents_core\\core\\agent.py\", line 293, in summarize_selected_patents\n    state.summary_result = chain.invoke({\"patent_list\": patent_list_str, \"plan_text\": state.plan_text}).content\n    │     │                │     │                      │                             │     └ 'This is a dummy plan text for evaluation.'\n    │     │                │     │                      │                             └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n    │     │                │     │                      └ 'publication_number                                                                                                          ...\n    │     │                │     └ <function RunnableSequence.invoke at 0x0000029C2FED85E0>\n    │     │                └ ChatPromptTemplate(input_variables=['patent_list', 'plan_text'], input_types={}, partial_variables={}, messages=[HumanMessage...\n    │     └ ''\n    └ AppState(chat_history=[], plan_text='This is a dummy plan text for evaluation.', search_query=SearchQuery(ipc_codes=['G05D 1/...\n\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\runnables\\base.py\", line 3046, in invoke\n    input_ = context.run(step.invoke, input_, config)\n             │       │   │    │       │       └ {'tags': [], 'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch...\n             │       │   │    │       └ ChatPromptValue(messages=[HumanMessage(content='あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複数の特許情報について、**提供された特許リストの情報に厳密に基づき**...\n             │       │   │    └ <function BaseChatModel.invoke at 0x0000029C345158A0>\n             │       │   └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000029C55EB38C0>, async_client=<ope...\n             │       └ <method 'run' of '_contextvars.Context' objects>\n             └ <_contextvars.Context object at 0x0000029C587EAD80>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 378, in invoke\n    self.generate_prompt(\n    │    └ <function BaseChatModel.generate_prompt at 0x0000029C34516020>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000029C55EB38C0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 963, in generate_prompt\n    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)\n           │    │        │                     │               │            └ {'tags': [], 'metadata': {'langgraph_step': 4, 'langgraph_node': 'summarize_selected_patents', 'langgraph_triggers': ('branch...\n           │    │        │                     │               └ <langchain_core.callbacks.manager.CallbackManager object at 0x0000029C587CDE50>\n           │    │        │                     └ None\n           │    │        └ [[HumanMessage(content='あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複数の特許情報について、**提供された特許リストの情報に厳密に基づき**、調査方針との関連性を分析し、報告書を作成してく...\n           │    └ <function BaseChatModel.generate at 0x0000029C34515EE0>\n           └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000029C55EB38C0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 782, in generate\n    self._generate_with_cache(\n    │    └ <function BaseChatModel._generate_with_cache at 0x0000029C34516160>\n    └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000029C55EB38C0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_core\\language_models\\chat_models.py\", line 1028, in _generate_with_cache\n    result = self._generate(\n             │    └ <function BaseChatOpenAI._generate at 0x0000029C346587C0>\n             └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000029C55EB38C0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\langchain_openai\\chat_models\\base.py\", line 1131, in _generate\n    response = self.client.create(**payload)\n               │    │      │        └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': 'あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複...\n               │    │      └ <function Completions.create at 0x0000029C55D5F6A0>\n               │    └ <openai.resources.chat.completions.completions.Completions object at 0x0000029C55EB38C0>\n               └ ChatOpenAI(client=<openai.resources.chat.completions.completions.Completions object at 0x0000029C55EB38C0>, async_client=<ope...\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_utils\\_utils.py\", line 287, in wrapper\n    return func(*args, **kwargs)\n           │     │       └ {'model': 'gpt-4o', 'stream': False, 'temperature': 0.0, 'messages': [{'content': 'あなたは、企業の知財部に所属する経験豊富な特許調査の専門家です。\\n    以下の複...\n           │     └ (<openai.resources.chat.completions.completions.Completions object at 0x0000029C55EB38C0>,)\n           └ <function Completions.create at 0x0000029C55D5F560>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\resources\\chat\\completions\\completions.py\", line 1087, in create\n    return self._post(\n           │    └ <bound method SyncAPIClient.post of <openai.OpenAI object at 0x0000029C55C692B0>>\n           └ <openai.resources.chat.completions.completions.Completions object at 0x0000029C55EB38C0>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1256, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n           │    │          │    │       │        │            │                  └ openai.Stream[openai.types.chat.chat_completion_chunk.ChatCompletionChunk]\n           │    │          │    │       │        │            └ False\n           │    │          │    │       │        └ FinalRequestOptions(method='post', url='/chat/completions', params={}, headers=NOT_GIVEN, max_retries=NOT_GIVEN, timeout=NOT_...\n           │    │          │    │       └ <class 'openai.types.chat.chat_completion.ChatCompletion'>\n           │    │          │    └ <function SyncAPIClient.request at 0x0000029C34333880>\n           │    │          └ <openai.OpenAI object at 0x0000029C55C692B0>\n           │    └ ~ResponseT\n           └ <function cast at 0x0000029C2B062200>\n  File \"C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\env-PatentsFinder3.0\\Lib\\site-packages\\openai\\_base_client.py\", line 1044, in request\n    raise self._make_status_error_from_response(err.response) from None\n          │    └ <function BaseClient._make_status_error_from_response at 0x0000029C34332020>\n          └ <openai.OpenAI object at 0x0000029C55C692B0>\n\nopenai.RateLimitError: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 61782. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}\nDuring task with name 'summarize_selected_patents' and id '03851298-e5e3-71f2-3bcd-12d80664083f'\n", "record": {"elapsed": {"repr": "0:01:34.244406", "seconds": 94.244406}, "exception": {"type": "RateLimitError", "value": "Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 61782. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}", "traceback": true}, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "run_single_evaluation", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 73, "message": "  [FATAL] An unexpected exception occurred in workflow execution for autonomous_driving_sensor_fusion_003", "module": "run_evaluation", "name": "__main__", "process": {"id": 3196, "name": "MainProcess"}, "thread": {"id": 18664, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:16:48.173316+09:00", "timestamp": 1752934608.173316}}}
{"text": "Skipping RAGAs evaluation for image_recognition_ai_001 due to error: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 74997. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}\n", "record": {"elapsed": {"repr": "0:01:34.464572", "seconds": 94.464572}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 91, "message": "Skipping RAGAs evaluation for image_recognition_ai_001 due to error: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 74997. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 3196, "name": "MainProcess"}, "thread": {"id": 18664, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:16:48.393482+09:00", "timestamp": 1752934608.393482}}}
{"text": "Skipping RAGAs evaluation for autonomous_driving_sensor_fusion_003 due to error: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 61782. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}\n", "record": {"elapsed": {"repr": "0:01:34.464762", "seconds": 94.464762}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 91, "message": "Skipping RAGAs evaluation for autonomous_driving_sensor_fusion_003 due to error: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-k6Jlbj0rFt9ccI7K4TYA0JpU on tokens per min (TPM): Limit 30000, Requested 61782. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}", "module": "run_evaluation", "name": "__main__", "process": {"id": 3196, "name": "MainProcess"}, "thread": {"id": 18664, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:16:48.393672+09:00", "timestamp": 1752934608.393672}}}
{"text": "Running RAGAs evaluation...\n", "record": {"elapsed": {"repr": "0:01:34.464900", "seconds": 94.4649}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 106, "message": "Running RAGAs evaluation...", "module": "run_evaluation", "name": "__main__", "process": {"id": 3196, "name": "MainProcess"}, "thread": {"id": 18664, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:16:48.393810+09:00", "timestamp": 1752934608.39381}}}
{"text": "Starting RAGAs evaluation within metrics.py...\n", "record": {"elapsed": {"repr": "0:01:34.472286", "seconds": 94.472286}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 30, "message": "Starting RAGAs evaluation within metrics.py...", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 3196, "name": "MainProcess"}, "thread": {"id": 18664, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:16:48.401196+09:00", "timestamp": 1752934608.401196}}}
{"text": "RAGAs evaluation completed successfully within metrics.py.\n", "record": {"elapsed": {"repr": "0:02:21.085318", "seconds": 141.085318}, "exception": null, "extra": {}, "file": {"name": "metrics.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\evaluation\\metrics.py"}, "function": "evaluate_with_ragas", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 34, "message": "RAGAs evaluation completed successfully within metrics.py.", "module": "metrics", "name": "evaluation.metrics", "process": {"id": 3196, "name": "MainProcess"}, "thread": {"id": 18664, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:17:35.014228+09:00", "timestamp": 1752934655.014228}}}
{"text": "RAGas evaluation completed.\n", "record": {"elapsed": {"repr": "0:02:21.085535", "seconds": 141.085535}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 113, "message": "RAGas evaluation completed.", "module": "run_evaluation", "name": "__main__", "process": {"id": 3196, "name": "MainProcess"}, "thread": {"id": 18664, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:17:35.014445+09:00", "timestamp": 1752934655.014445}}}
{"text": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json\n", "record": {"elapsed": {"repr": "0:02:21.088751", "seconds": 141.088751}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 125, "message": "\nEvaluation finished. Report saved to: C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\reports\\metrics_report.json", "module": "run_evaluation", "name": "__main__", "process": {"id": 3196, "name": "MainProcess"}, "thread": {"id": 18664, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:17:35.017661+09:00", "timestamp": 1752934655.017661}}}
{"text": "{\n  \"faithfulness\": 1.0,\n  \"answer_relevancy\": 0.7725064646528369\n}\n", "record": {"elapsed": {"repr": "0:02:21.088932", "seconds": 141.088932}, "exception": null, "extra": {}, "file": {"name": "run_evaluation.py", "path": "C:\\Users\\atsuk\\OneDrive\\ドキュメント\\GeminiCLI\\2507 PatentsFinder3.0\\scripts\\run_evaluation.py"}, "function": "main", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 126, "message": "{\n  \"faithfulness\": 1.0,\n  \"answer_relevancy\": 0.7725064646528369\n}", "module": "run_evaluation", "name": "__main__", "process": {"id": 3196, "name": "MainProcess"}, "thread": {"id": 18664, "name": "MainThread"}, "time": {"repr": "2025-07-19 23:17:35.017842+09:00", "timestamp": 1752934655.017842}}}
